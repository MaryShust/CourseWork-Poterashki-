(()=>{"use strict";var t={85:(t,e,s)=>{var a=s(471),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("AppHeader",{on:{"login-clicked":function(e){t.showLogin=!0}}}),e("main",{staticClass:"main-content"},[e("router-view")],1),e("AppFooter"),t.showLogin?e("LoginModal",{on:{close:function(e){t.showLogin=!1},"login-success":t.handleLoginSuccess}}):t._e()],1)},r=[],o=function(){var t=this,e=t._self._c;return e("header",{staticClass:"header"},[e("div",{staticClass:"header-content"},[e("h1",{staticClass:"header-title",on:{click:t.goHome}},[t._v("–ü–æ—Ç–µ—Ä—è—à–∫–∏")]),e("div",{staticClass:"header-actions"},[t.currentUser?e("span",{staticClass:"user-greeting"},[t._v(" –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, "+t._s(t.currentUser)+"! ")]):t._e(),t.currentUser?e("button",{staticClass:"profile-btn",on:{click:t.goToProfile}},[t._v(" üë§ –ü—Ä–æ—Ñ–∏–ª—å ")]):t._e(),t.currentUser?e("button",{staticClass:"logout-btn",on:{click:t.logout}},[t._v(" –í—ã–π—Ç–∏ ")]):e("button",{staticClass:"login-btn",on:{click:function(e){return t.$emit("login-clicked")}}},[t._v(" –í–æ–π—Ç–∏ ")])])])])},n=[];const l={name:"AppHeader",inject:["eventBus"],data(){return{currentUser:null}},mounted(){console.log("HEADER CREATE"),this.checkAuth(),window.addEventListener("storage",this.checkAuth),this.$root.$on("auth-changed",this.checkAuth),this.eventBus.$on("user-name-changed",this.checkAuth),this.eventBus.$on("user-login",this.checkAuth)},beforeDestroy(){console.log("HEADER DESTROY"),window.removeEventListener("storage",this.checkAuth),this.$root.$off("auth-changed",this.checkAuth),this.eventBus.$off("user-name-changed",this.checkAuth),this.eventBus.$off("user-login",this.checkAuth)},methods:{checkAuth(){const t=localStorage.getItem("currentUser");console.log("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Header:",t),this.currentUser=t},logout(){console.log("üö™ –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã"),localStorage.removeItem("currentUser"),localStorage.removeItem("currentUserId"),this.currentUser=null,this.$root.$emit("auth-changed"),this.$router.push("/"),"/"!==this.$route.path?this.$router.push("/"):console.log("üìç –£–∂–µ –Ω–∞—Ö–æ–¥–∏–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ")},goHome(){this.$router.push("/")},goToProfile(){this.$router.push("/profile")}}},c=l;var d=s(656),u=(0,d.A)(c,o,n,!1,null,"20e7cf87",null);const m=u.exports;var h=function(){var t=this;t._self._c;return t._m(0)},p=[function(){var t=this,e=t._self._c;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"footer-content"},[e("div",{staticClass:"contact-info"},[e("p",[t._v("üìß Email: pomogi@poteryashki.ru")]),e("p",[t._v("üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 (800) 555-35-35")]),e("p",[t._v("‚è∞ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ")])]),e("div",{staticClass:"footer-links"},[e("a",{attrs:{href:"#"}},[t._v("–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏")]),e("a",{attrs:{href:"#"}},[t._v("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ")]),e("a",{attrs:{href:"#"}},[t._v("–ü–æ–º–æ—â—å")])])])])}];const v={name:"AppFooter"},g=v;var f=(0,d.A)(g,h,p,!1,null,"31dd6010",null);const _=f.exports;var C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-overlay",on:{click:function(e){return t.$emit("close")}}},[e("div",{staticClass:"modal",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"modal-header"},[e("h3",[t._v("–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è")]),e("button",{staticClass:"close-btn",on:{click:function(e){return t.$emit("close")}}},[t._v("√ó")])]),e("div",{staticClass:"tabs"},[e("button",{staticClass:"tab-btn",class:{active:"login"===t.activeTab},on:{click:function(e){t.activeTab="login"}}},[t._v(" –í–æ–π—Ç–∏ ")]),e("button",{staticClass:"tab-btn",class:{active:"register"===t.activeTab},on:{click:function(e){t.activeTab="register"}}},[t._v(" –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ")])]),"login"===t.activeTab?e("form",{staticClass:"auth-form",on:{submit:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"login-email"}},[t._v("Email:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.email,expression:"loginData.email"}],class:{error:t.loginErrors.email},attrs:{type:"email",id:"login-email",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email"},domProps:{value:t.loginData.email},on:{input:function(e){e.target.composing||t.$set(t.loginData,"email",e.target.value)}}}),t.loginErrors.email?e("div",{staticClass:"field-error"},[t._v(t._s(t.loginErrors.email))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"login-password"}},[t._v("–ü–∞—Ä–æ–ª—å:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.password,expression:"loginData.password"}],class:{error:t.loginErrors.password},attrs:{type:"password",id:"login-password",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å"},domProps:{value:t.loginData.password},on:{input:function(e){e.target.composing||t.$set(t.loginData,"password",e.target.value)}}}),t.loginErrors.password?e("div",{staticClass:"field-error"},[t._v(t._s(t.loginErrors.password))]):t._e()]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.loginLoading}},[t._v(" "+t._s(t.loginLoading?"–í—Ö–æ–¥...":"–í–æ–π—Ç–∏")+" ")]),e("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.clearLoginForm}},[t._v(" –û—á–∏—Å—Ç–∏—Ç—å ")])]),t.loginError?e("div",{staticClass:"error-message"},[t._v(" "+t._s(t.loginError)+" ")]):t._e()]):e("form",{staticClass:"auth-form",on:{submit:function(e){return e.preventDefault(),t.handleRegister.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"register-name"}},[t._v("–ò–º—è:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.registerData.name,expression:"registerData.name"}],class:{error:t.registerErrors.name},attrs:{type:"text",id:"register-name",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"},domProps:{value:t.registerData.name},on:{input:function(e){e.target.composing||t.$set(t.registerData,"name",e.target.value)}}}),t.registerErrors.name?e("div",{staticClass:"field-error"},[t._v(t._s(t.registerErrors.name))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"register-email"}},[t._v("Email:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.registerData.email,expression:"registerData.email"}],class:{error:t.registerErrors.email},attrs:{type:"email",id:"register-email",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email"},domProps:{value:t.registerData.email},on:{input:function(e){e.target.composing||t.$set(t.registerData,"email",e.target.value)}}}),t.registerErrors.email?e("div",{staticClass:"field-error"},[t._v(t._s(t.registerErrors.email))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"register-password"}},[t._v("–ü–∞—Ä–æ–ª—å:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.registerData.password,expression:"registerData.password"}],class:{error:t.registerErrors.password},attrs:{type:"password",id:"register-password",required:"",placeholder:"–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å"},domProps:{value:t.registerData.password},on:{input:function(e){e.target.composing||t.$set(t.registerData,"password",e.target.value)}}}),t.registerErrors.password?e("div",{staticClass:"field-error"},[t._v(t._s(t.registerErrors.password))]):t._e(),e("div",{staticClass:"field-hint"},[t._v("–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤")])]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.registerLoading}},[t._v(" "+t._s(t.registerLoading?"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...":"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è")+" ")]),e("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.clearRegisterForm}},[t._v(" –û—á–∏—Å—Ç–∏—Ç—å ")])])]),e("div",{staticClass:"form-switch"},["login"===t.activeTab?e("span",[t._v(" –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? "),e("button",{staticClass:"switch-link",on:{click:function(e){t.activeTab="register"}}},[t._v("–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å")])]):e("span",[t._v(" –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? "),e("button",{staticClass:"switch-link",on:{click:function(e){t.activeTab="login"}}},[t._v("–í–æ–π–¥–∏—Ç–µ")])])])])])},y=[];const w={name:"LoginModal",inject:["eventBus"],data(){return{activeTab:"login",loginData:{email:"",password:""},loginLoading:!1,loginError:"",loginErrors:{},registerData:{name:"",email:"",password:""},registerLoading:!1,registerErrors:{}}},methods:{async handleLogin(){if(this.loginLoading=!0,this.loginError="",this.loginErrors={},this.validateLoginForm())try{const t=await fetch("/api/public/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.loginData.email,password:this.loginData.password})});if(!t.ok){const e=await t.text();throw new Error(e||"–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞")}const e=await t.json();if(!e.token)throw new Error("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞");localStorage.setItem("currentUser",e.username||this.loginData.email.split("@")[0]),localStorage.setItem("currentUserId",e.token),localStorage.setItem("userEmail",this.loginData.email),this.$root.$emit("auth-changed"),this.eventBus.$emit("user-login",!0),this.$emit("login-success",e.username||this.loginData.email.split("@")[0])}catch(t){console.error("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:",t),this.loginError="–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"}finally{this.loginLoading=!1}else this.loginLoading=!1},validateLoginForm(){let t=!0;return this.loginErrors={},this.loginData.email.trim()?this.isValidEmail(this.loginData.email)||(this.loginErrors.email="–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email",t=!1):(this.loginErrors.email="Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),this.loginData.password.trim()?this.loginData.password.length<6&&(this.loginErrors.password="–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤",t=!1):(this.loginErrors.password="–ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),t},clearLoginForm(){this.loginData={email:"",password:""},this.loginError="",this.loginErrors={}},async handleRegister(){if(this.registerLoading=!0,this.registerErrors={},this.validateRegisterForm())try{const t=await fetch("api/public/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.registerData.name,email:this.registerData.email,password:this.registerData.password})});if(!t.ok){const e=await t.text();throw new Error(e||"–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏")}const e=await t.json();if(!e.token)throw new Error("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞");localStorage.setItem("currentUser",this.registerData.name),localStorage.setItem("currentUserId",e.token),localStorage.setItem("userEmail",this.registerData.email),this.eventBus.$emit("user-login",!0),this.$root.$emit("auth-changed"),this.$emit("login-success",this.registerData.name)}catch(t){console.error("–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:",t)}finally{this.registerLoading=!1}else this.registerLoading=!1},validateRegisterForm(){let t=!0;return this.registerErrors={},this.registerData.name.trim()?this.registerData.name.length<2&&(this.registerErrors.name="–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 2 —Å–∏–º–≤–æ–ª–æ–≤",t=!1):(this.registerErrors.name="–ò–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",t=!1),this.registerData.email.trim()?this.isValidEmail(this.registerData.email)||(this.registerErrors.email="–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email",t=!1):(this.registerErrors.email="Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),this.registerData.password.trim()?this.registerData.password.length<6&&(this.registerErrors.password="–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤",t=!1):(this.registerErrors.password="–ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),t},clearRegisterForm(){this.registerData={name:"",email:"",password:""},this.registerErrors={}},isValidEmail(t){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(t)}}},D=w;var b=(0,d.A)(D,C,y,!1,null,"48fc0d58",null);const A=b.exports,I=new a.Ay,S={name:"App",components:{AppHeader:m,AppFooter:_,LoginModal:A},data(){return{showLogin:!1}},provide(){return{eventBus:I}},mounted(){this.$root.$on("show-login-modal",()=>{console.log("üîî –°–æ–±—ã—Ç–∏–µ show-login-modal –ø–æ–ª—É—á–µ–Ω–æ –≤ App.vue!"),console.log("üîÑ –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏..."),this.showLogin=!0}),this.checkAuth()},beforeDestroy(){this.$root.$off("show-login-modal")},methods:{checkAuth(){const t=localStorage.getItem("currentUser");console.log("üîç –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:",t)},handleLoginSuccess(t){console.log("‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ –≤ App.vue! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",t),this.showLogin=!1,this.$router.push("/dashboard")}}},P=S;var F=(0,d.A)(P,i,r,!1,null,null,null);const T=F.exports;var k=s(173),$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-page"},[e("section",{staticClass:"hero-section"},[e("div",{staticClass:"hero-content"},[e("h2",[t._v("–ù–∞–π–¥–∏ —Ç–æ, —á—Ç–æ –ø–æ—Ç–µ—Ä—è–ª")]),e("p",[t._v("–í–µ—Ä–Ω–∏ —Ä–∞–¥–æ—Å—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü—É –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–π –≤–µ—â–∏")]),e("button",{staticClass:"cta-button",on:{click:t.handleStartSearch}},[t._v(" –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ ")])])]),t._m(0),t._m(1),t._m(2),t._m(3)])},x=[function(){var t=this,e=t._self._c;return e("section",{staticClass:"info-section"},[e("h2",[t._v("–û –Ω–∞—Å")]),e("div",{staticClass:"content-card"},[e("p",[t._v('"–ü–æ—Ç–µ—Ä—è—à–∫–∏" - —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è –ø–æ–º–æ—â–∏ –ª—é–¥—è–º –≤ –ø–æ–∏—Å–∫–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –≤–µ—â–µ–π –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏—Ö –≤–ª–∞–¥–µ–ª—å—Ü–∞–º.')]),e("p",[t._v("–ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–µ—Ä—è–ª–∏ —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ, –∏ —Ç–µ—Ö, –∫—Ç–æ –Ω–∞—à–µ–ª —á—É–∂—É—é –≤–µ—â—å –∏ —Ö–æ—á–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –µ–µ –≤–ª–∞–¥–µ–ª—å—Ü—É.")])])])},function(){var t=this,e=t._self._c;return e("section",{staticClass:"info-section"},[e("h2",[t._v("–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞")]),e("div",{staticClass:"content-card"},[e("p",[t._v("–ù–∞—à–∞ –≥–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å - —Å–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–ø–æ–º–æ—â–∏, –≥–¥–µ –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏—Ö –≤ –ø–æ–∏—Å–∫–µ —É—Ç–µ—Ä—è–Ω–Ω—ã—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π.")]),e("p",[t._v("–ú—ã —Å—Ç—Ä–µ–º–∏–º—Å—è —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –≤–µ—â–µ–π –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑—å –º–µ–∂–¥—É –ª—é–¥—å–º–∏ —á–µ—Ä–µ–∑ –¥–æ–±—Ä—ã–µ –ø–æ—Å—Ç—É–ø–∫–∏.")])])])},function(){var t=this,e=t._self._c;return e("section",{staticClass:"info-section"},[e("h2",[t._v("–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–µ")]),e("div",{staticClass:"features-grid"},[e("div",{staticClass:"feature-card"},[e("div",{staticClass:"feature-icon"},[t._v("üìù")]),e("h3",[t._v("–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –ø–æ—Ç–µ—Ä–µ")]),e("p",[t._v("–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–π –≤–µ—â–∏, –¥–æ–±–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ")])]),e("div",{staticClass:"feature-card"},[e("div",{staticClass:"feature-icon"},[t._v("üîç")]),e("h3",[t._v("–ù–∞–π—Ç–∏ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –≤–µ—â–∏")]),e("p",[t._v("–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–µ—â–∞—Ö –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ")])]),e("div",{staticClass:"feature-card"},[e("div",{staticClass:"feature-icon"},[t._v("üí∞")]),e("h3",[t._v("–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ")]),e("p",[t._v("–ù–∞–∑–Ω–∞—á—å—Ç–µ –¥–µ–Ω–µ–∂–Ω–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –∑–∞ –≤–æ–∑–≤—Ä–∞—Ç —Ü–µ–Ω–Ω–æ–π –≤–µ—â–∏")])]),e("div",{staticClass:"feature-card"},[e("div",{staticClass:"feature-icon"},[t._v("üì±")]),e("h3",[t._v("–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫")]),e("p",[t._v("–ò—â–∏—Ç–µ –≤–µ—â–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é –∏ –¥–∞—Ç–µ")])])])])},function(){var t=this,e=t._self._c;return e("section",{staticClass:"stats-section"},[e("div",{staticClass:"stats-grid"},[e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v("1,000+")]),e("div",{staticClass:"stat-label"},[t._v("–≤–µ—Ä–Ω—É—Ç—ã—Ö –≤–µ—â–µ–π")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v("500+")]),e("div",{staticClass:"stat-label"},[t._v("–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v("50+")]),e("div",{staticClass:"stat-label"},[t._v("–≥–æ—Ä–æ–¥–æ–≤")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v("95%")]),e("div",{staticClass:"stat-label"},[t._v("–¥–æ–≤–æ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")])])])])}];const U={name:"Home",data(){return{currentUserId:null}},mounted(){this.checkAuth(),window.addEventListener("storage",this.checkAuth),this.$root.$on("auth-changed",this.checkAuth)},beforeDestroy(){window.removeEventListener("storage",this.checkAuth),this.$root.$off("auth-changed",this.checkAuth)},methods:{checkAuth(){this.currentUserId=localStorage.getItem("currentUserId")},handleStartSearch(){null==this.currentUserId?this.$root.$emit("show-login-modal"):this.$router.push("/dashboard")}}},E=U;var N=(0,d.A)(E,$,x,!1,null,"9937d636",null);const O=N.exports;var M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-page"},[t._m(0),e("div",{staticClass:"dashboard-content"},[e("div",{staticClass:"dashboard-grid"},[e("div",{staticClass:"dashboard-card stats-card"},[e("h3",[t._v("–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")]),t.loading?e("div",{staticClass:"loading"},[t._v("–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...")]):e("div",{staticClass:"stats"},[e("div",{staticClass:"stat"},[e("span",{staticClass:"stat-value"},[t._v(t._s(t.statistics.activeAnnouncements))]),e("span",{staticClass:"stat-label"},[t._v("–ê–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π")])]),e("div",{staticClass:"stat"},[e("span",{staticClass:"stat-value"},[t._v(t._s(t.statistics.resolvedAnnouncements))]),e("span",{staticClass:"stat-label"},[t._v("–ù–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–µ—â–µ–π")])]),e("div",{staticClass:"stat"},[e("span",{staticClass:"stat-value"},[t._v(t._s(t.formatCurrency(t.statistics.totalRemuneration)))]),e("span",{staticClass:"stat-label"},[t._v("–û–±—â–µ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ")])]),e("div",{staticClass:"stat"},[e("span",{staticClass:"stat-value"},[t._v(t._s(t.formatCurrency(t.statistics.maxRemuneration)))]),e("span",{staticClass:"stat-label"},[t._v("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ")])])]),t.error?e("div",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e()]),e("div",{staticClass:"dashboard-card actions-card"},[e("h3",[t._v("–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è")]),e("div",{staticClass:"action-buttons"},[e("button",{staticClass:"action-btn primary",on:{click:t.createAnnouncement}},[t._v(" üìù –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –ø–æ—Ç–µ—Ä–µ ")]),e("button",{staticClass:"action-btn gray",on:{click:t.findItem}},[t._v(" üîç –ù–∞–π—Ç–∏ –≤–µ—â—å ")]),e("button",{staticClass:"action-btn gray",on:{click:t.setReward}},[t._v(" üí∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ ")]),e("button",{staticClass:"action-btn gray",on:{click:t.goToProfile}},[t._v(" üë§ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å ")])])])])])])},L=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-header"},[e("h2",[t._v("–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç")]),e("p",[t._v("–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–∏–º–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏")])])}];const j={name:"Dashboard",inject:["eventBus"],data(){return{currentUser:null,currentUserId:null,loading:!1,loadingResponses:!1,error:"",statistics:{activeAnnouncements:0,resolvedAnnouncements:0,totalRemuneration:0,maxRemuneration:0}}},mounted(){this.checkAuth(),this.loadStatistics(),this.$root.$on("auth-changed",()=>{this.checkAuth(),this.loadStatistics()})},beforeDestroy(){this.$root.$off("auth-changed")},methods:{checkAuth(){const t=localStorage.getItem("currentUser"),e=localStorage.getItem("currentUserId");console.log("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Dashboard:"),console.log("üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",t),console.log("üÜî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:",e),this.currentUser=t,this.currentUserId=e,t&&e||(console.log("‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é"),this.$router.push("/"))},async loadStatistics(){if(this.currentUserId){console.log("üìä –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è ID:",this.currentUserId),this.loading=!0,this.error="";try{const t=await fetch("/api/public/my-statistics",{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.currentUserId}});if(!t.ok)throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${t.status}`);const e=await t.json();console.log("üì• –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:",e),this.statistics={activeAnnouncements:e.active||0,resolvedAnnouncements:e.foundTotal||0,totalRemuneration:e.totalFee||0,maxRemuneration:e.maxFee||0},console.log("‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:",this.statistics)}catch(t){console.error("üí• –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:",t),this.error="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",this.statistics={activeAnnouncements:0,resolvedAnnouncements:0,totalRemuneration:0,maxRemuneration:0}}finally{this.loading=!1}}else console.log("‚ö†Ô∏è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏")},formatCurrency(t){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(t)},createAnnouncement(){this.$router.push("/create")},goToProfile(){this.$router.push("/profile")},findItem(){this.$router.push("/all_announcements")},setReward(){this.$router.push("/my_announcements")}}},R=j;var B=(0,d.A)(R,M,L,!1,null,"5a03177d",null);const G=B.exports;var z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile-page"},[t._m(0),e("div",{staticClass:"profile-content"},[e("div",{staticClass:"profile-card"},[e("div",{staticClass:"profile-avatar"},[e("div",{staticClass:"avatar-circle"},[e("span",{staticClass:"avatar-text"},[t._v(t._s(t.avatarInitial))])]),t.profile.dateCreating?e("div",{staticClass:"registration-date"},[t._v(" –ù–∞ —Å–µ—Ä–≤–∏—Å–µ —Å "+t._s(t.formatDate(t.profile.dateCreating))+" ")]):t._e()]),e("form",{staticClass:"profile-form",on:{submit:function(e){return e.preventDefault(),t.saveProfile.apply(null,arguments)}}},[e("div",{staticClass:"form-section"},[e("h3",[t._v("–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.name,expression:"profile.name"}],class:{error:t.errors.name},attrs:{type:"text",id:"name",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"},domProps:{value:t.profile.name},on:{input:function(e){e.target.composing||t.$set(t.profile,"name",e.target.value)}}}),t.errors.name?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.name))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"phone"}},[t._v("–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.phone,expression:"profile.phone"}],attrs:{type:"tel",id:"phone",placeholder:"+7 (999) 123-45-67"},domProps:{value:t.profile.phone},on:{input:function(e){e.target.composing||t.$set(t.profile,"phone",e.target.value)}}}),e("div",{staticClass:"field-hint"},[t._v("–§–æ—Ä–º–∞—Ç: +7 (999) 123-45-67")])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"city"}},[t._v("–ì–æ—Ä–æ–¥ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.city,expression:"profile.city"}],attrs:{type:"text",id:"city",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≥–æ—Ä–æ–¥"},domProps:{value:t.profile.city},on:{input:function(e){e.target.composing||t.$set(t.profile,"city",e.target.value)}}})])]),e("div",{staticClass:"form-section"},[e("h3",[t._v("–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.email,expression:"profile.email"}],attrs:{type:"email",id:"email",placeholder:"example@mail.ru"},domProps:{value:t.profile.email},on:{input:function(e){e.target.composing||t.$set(t.profile,"email",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏")]),e("div",{staticClass:"readonly-field"},[t._v(" "+t._s(t.profile.dateCreating?t.formatDate(t.profile.dateCreating):"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+" ")])])]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.loading}},[t._v(" "+t._s(t.loading?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è")+" ")]),e("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.loadProfile}},[t._v(" –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ ")]),e("button",{staticClass:"btn-text",attrs:{type:"button"},on:{click:t.goBack}},[t._v(" ‚Üê –ù–∞–∑–∞–¥ ")])]),t.successMessage?e("div",{staticClass:"success-message"},[t._v(" ‚úÖ "+t._s(t.successMessage)+" ")]):t._e(),t.errorMessage?e("div",{staticClass:"error-message"},[t._v(" ‚ùå "+t._s(t.errorMessage)+" ")]):t._e()])])])])},Z=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile-header"},[e("h2",[t._v("–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")]),e("p",[t._v("–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏")])])}];const H={name:"Profile",inject:["eventBus"],data(){return{loading:!1,loadingProfile:!1,successMessage:"",errorMessage:"",errors:{},profile:{id:null,name:"",phone:"",city:"",email:"",dateCreating:null}}},computed:{avatarInitial(){return this.profile.name?this.profile.name.charAt(0).toUpperCase():"?"}},mounted(){this.checkAuth(),this.loadProfile(),this.$root.$on("auth-changed",this.checkAuth)},beforeDestroy(){this.$root.$off("auth-changed")},methods:{checkAuth(){const t=localStorage.getItem("currentUser"),e=localStorage.getItem("currentUserId");console.log("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ:"),console.log("üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",t),console.log("üÜî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:",e),t&&e?(this.profile.id=e,t!==this.profile.name&&(console.log("üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω–∏ –∏–∑ localStorage:",t),this.profile.name=t)):(console.log("‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é"),this.$router.push("/"))},async loadProfile(){const t=localStorage.getItem("currentUserId");if(t){console.log("üì• –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è ID:",t),this.loadingProfile=!0,this.errorMessage="";try{const e=await fetch("/api/public/my-profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();console.log("‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—É—á–µ–Ω —Å —Å–µ—Ä–≤–µ—Ä–∞:",s),this.profile={...this.profile,name:s.name||"",phone:s.phone||"",city:s.city||"",email:s.email||"",dateCreating:s.dateCreating||null};const a=localStorage.getItem("currentUser");s.name&&a!==s.name&&(console.log(`üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –≤ localStorage: ${a} ‚Üí ${s.name}`),localStorage.setItem("currentUser",s.name),this.$root.$emit("auth-changed"),this.eventBus.$emit("user-name-changed",s.name)),this.successMessage="–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã",setTimeout(()=>{this.successMessage=""},3e3)}catch(e){console.error("üí• –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:",e),this.errorMessage="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Å —Å–µ—Ä–≤–µ—Ä–∞",this.loadFromLocalStorage()}finally{this.loadingProfile=!1}}else console.log("‚ö†Ô∏è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω")},loadFromLocalStorage(){console.log("üì• –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏–∑ localStorage –∫–∞–∫ fallback");const t=localStorage.getItem("userProfile");if(t)try{const e=JSON.parse(t);this.profile={...this.profile,...e}}catch(e){console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ localStorage:",e)}},async saveProfile(){if(console.log("üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä..."),this.loading=!0,this.successMessage="",this.errorMessage="",this.errors={},!this.profile.name.trim())return this.errors.name="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",void(this.loading=!1);try{const t=localStorage.getItem("currentUserId");if(!t)throw new Error("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω");const e={name:this.profile.name,phone:this.profile.phone,city:this.profile.city,email:this.profile.email};console.log("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä:",e);const s=await fetch("/api/public/my-profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);localStorage.setItem("userProfile",JSON.stringify(this.profile));const a=localStorage.getItem("currentUser");a!==this.profile.name?(console.log(`üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${a} ‚Üí ${this.profile.name}`),localStorage.setItem("currentUser",this.profile.name),this.$root.$emit("auth-changed"),this.eventBus.$emit("user-name-changed",this.profile.name),this.successMessage=`–ò–º—è —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ "${this.profile.name}"!`):this.successMessage="–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!",setTimeout(()=>{this.successMessage=""},3e3)}catch(t){console.error("üí• –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:",t),this.errorMessage="–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.",localStorage.setItem("userProfile",JSON.stringify(this.profile))}finally{this.loading=!1}},goBack(){this.$router.go(-1)},formatDate(t){try{const e=new Date(t);return e.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"}}}},q=H;var W=(0,d.A)(q,z,Z,!1,null,"f0fd0512",null);const J=W.exports;var V=function(){var t=this,e=t._self._c;return e("div",[e("AnnouncementForm")],1)},Q=[],Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"announcement-form-page"},[e("div",{staticClass:"form-header"},[e("h2",[t._v(t._s(t.isEditMode?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è":"–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è"))]),e("p",[t._v(t._s(t.isEditMode?"–í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ":"–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–π –≤–µ—â–∏"))])]),e("form",{staticClass:"announcement-form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-section type-section"},[e("h3",[t._v("–¢–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),e("div",{staticClass:"radio-group"},[e("label",{staticClass:"radio-option",class:{selected:"LOST"===t.formData.type}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.type,expression:"formData.type"}],attrs:{type:"radio",value:"LOST"},domProps:{checked:t._q(t.formData.type,"LOST")},on:{change:[function(e){return t.$set(t.formData,"type","LOST")},t.handleTypeChange]}}),t._m(0)]),e("label",{staticClass:"radio-option",class:{selected:"FOUND"===t.formData.type}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.type,expression:"formData.type"}],attrs:{type:"radio",value:"FOUND"},domProps:{checked:t._q(t.formData.type,"FOUND")},on:{change:[function(e){return t.$set(t.formData,"type","FOUND")},t.handleTypeChange]}}),t._m(1)])]),t.errors.type?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.type))]):t._e()]),e("div",{staticClass:"form-section"},[e("h3",[t._v("–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ –≤–µ—â–∏ *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.title,expression:"formData.title"}],class:{error:t.errors.title},attrs:{type:"text",id:"title",required:"",placeholder:"FOUND"===t.formData.type?"–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏, –ù–∞–π–¥–µ–Ω–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω, –ù–∞–π–¥–µ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫":"–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–ª—é—á–∏ –æ—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã, iPhone 13, –ö–æ—à–µ–ª–µ–∫",maxlength:"100"},domProps:{value:t.formData.title},on:{input:function(e){e.target.composing||t.$set(t.formData,"title",e.target.value)}}}),t.errors.title?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.title))]):t._e(),e("div",{staticClass:"field-hint"},[t._v("–ú–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤")])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ *")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.description,expression:"formData.description"}],class:{error:t.errors.description},attrs:{id:"description",rows:"4",required:"",placeholder:"FOUND"===t.formData.type?"–û–ø–∏—à–∏—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—É—é –≤–µ—â—å –ø–æ–¥—Ä–æ–±–Ω–æ: –≥–¥–µ –Ω–∞—à–ª–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏...":"–û–ø–∏—à–∏—Ç–µ –≤–µ—â—å –ø–æ–¥—Ä–æ–±–Ω–æ: –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–µ...",maxlength:"1000"},domProps:{value:t.formData.description},on:{input:function(e){e.target.composing||t.$set(t.formData,"description",e.target.value)}}}),t.errors.description?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.description))]):t._e(),e("div",{staticClass:"field-hint"},[t._v(t._s(t.formData.description.length)+"/1000 —Å–∏–º–≤–æ–ª–æ–≤")])])]),e("div",{staticClass:"form-section"},[e("h3",[t._v(t._s("FOUND"===t.formData.type?"–ú–µ—Å—Ç–æ –∏ –≤—Ä–µ–º—è –Ω–∞—Ö–æ–¥–∫–∏":"–ú–µ—Å—Ç–æ –∏ –≤—Ä–µ–º—è –ø–æ—Ç–µ—Ä–∏"))]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group half"},[e("label",{attrs:{for:"city"}},[t._v("–ì–æ—Ä–æ–¥ *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.place.city,expression:"formData.place.city"}],class:{error:t.errors.city},attrs:{type:"text",id:"city",required:"",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–æ—Å–∫–≤–∞"},domProps:{value:t.formData.place.city},on:{input:function(e){e.target.composing||t.$set(t.formData.place,"city",e.target.value)}}}),t.errors.city?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.city))]):t._e()]),e("div",{staticClass:"form-group half"},[e("label",{attrs:{for:"street"}},[t._v("–£–ª–∏—Ü–∞")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.place.street,expression:"formData.place.street"}],attrs:{type:"text",id:"street",placeholder:"FOUND"===t.formData.type?"–ì–¥–µ –∏–º–µ–Ω–Ω–æ –Ω–∞—à–ª–∏ –≤–µ—â—å":"–£–ª–∏—Ü–∞"},domProps:{value:t.formData.place.street},on:{input:function(e){e.target.composing||t.$set(t.formData.place,"street",e.target.value)}}})])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group half"},[e("label",{attrs:{for:"house"}},[t._v("–î–æ–º")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.place.house,expression:"formData.place.house"}],attrs:{type:"text",id:"house",placeholder:"–ù–æ–º–µ—Ä –¥–æ–º–∞"},domProps:{value:t.formData.place.house},on:{input:function(e){e.target.composing||t.$set(t.formData.place,"house",e.target.value)}}})]),e("div",{staticClass:"form-group half"},[e("label",{attrs:{for:"placeName"}},[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.place.placeName,expression:"formData.place.placeName"}],attrs:{type:"text",id:"placeName",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –¢–¶ '–ú–µ–≥–∞', –ü–∞—Ä–∫ '–°–æ–∫–æ–ª—å–Ω–∏–∫–∏'"},domProps:{value:t.formData.place.placeName},on:{input:function(e){e.target.composing||t.$set(t.formData.place,"placeName",e.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"extraDescription"}},[t._v("–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Å—Ç–∞")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.place.extraDescription,expression:"formData.place.extraDescription"}],attrs:{id:"extraDescription",rows:"3",placeholder:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –æ –º–µ—Å—Ç–µ, –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã –∏ —Ç.–¥.",maxlength:"500"},domProps:{value:t.formData.place.extraDescription},on:{input:function(e){e.target.composing||t.$set(t.formData.place,"extraDescription",e.target.value)}}}),e("div",{staticClass:"field-hint"},[t._v(t._s(t.formData.place.extraDescription.length)+"/500 —Å–∏–º–≤–æ–ª–æ–≤")])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"date"}},[t._v(t._s("FOUND"===t.formData.type?"–î–∞—Ç–∞ –Ω–∞—Ö–æ–¥–∫–∏ *":"–î–∞—Ç–∞ –ø–æ—Ç–µ—Ä–∏ *"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.date,expression:"formData.date"}],class:{error:t.errors.date},attrs:{type:"datetime-local",id:"date",required:"",max:t.currentDateTime},domProps:{value:t.formData.date},on:{input:function(e){e.target.composing||t.$set(t.formData,"date",e.target.value)}}}),t.errors.date?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.date))]):t._e(),e("div",{staticClass:"field-hint"},[t._v("–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è")])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"reward"}},[t._v("–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ (—Ä—É–±.)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.fee,expression:"formData.fee",modifiers:{number:!0}}],attrs:{type:"number",id:"reward",placeholder:"0",min:"0",step:"100"},domProps:{value:t.formData.fee},on:{input:function(e){e.target.composing||t.$set(t.formData,"fee",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),"FOUND"===t.formData.type?e("div",{staticClass:"field-hint"},[t._v(" –£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∑–∞ –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞—Ö–æ–¥–∫–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é) ")]):e("div",{staticClass:"field-hint"},[t._v(" –£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É, –∫–æ—Ç–æ—Ä—É—é –≥–æ—Ç–æ–≤—ã –∑–∞–ø–ª–∞—Ç–∏—Ç—å –∑–∞ –≤–æ–∑–≤—Ä–∞—Ç ")])])]),e("div",{staticClass:"form-section"},[e("h3",[t._v(t._s("FOUND"===t.formData.type?"–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –Ω–∞—Ö–æ–¥–∫–∏":"–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –≤–µ—â–∏"))]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"photo"}},[t._v("–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è")]),e("div",{staticClass:"file-upload"},[e("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",id:"photo",accept:"image/*"},on:{change:t.handleFileUpload}}),e("label",{staticClass:"file-label",attrs:{for:"photo"}},[t.selectedFile?e("span",[t._v("–§–∞–π–ª –≤—ã–±—Ä–∞–Ω: "+t._s(t.selectedFile.name))]):e("span",[t._v("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª")])]),t.selectedFile?e("button",{staticClass:"btn-remove",attrs:{type:"button"},on:{click:t.removePhoto}},[t._v(" √ó ")]):t._e()]),t.existingPhotos.length>0?e("div",{staticClass:"existing-photos"},[e("h4",[t._v("–¢–µ–∫—É—â–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏:")]),e("div",{staticClass:"photos-grid"},t._l(t.existingPhotos,function(s,a){return e("div",{key:a,staticClass:"photo-item"},[e("img",{attrs:{src:t.getPhotoUrl(s),alt:"–§–æ—Ç–æ"},on:{error:t.handleImageError}}),t.isEditMode?e("button",{staticClass:"btn-remove-small",attrs:{type:"button"},on:{click:function(e){return t.removeExistingPhoto(a)}}},[t._v(" √ó ")]):t._e()])}),0)]):t._e(),t.photoPreview?e("div",{staticClass:"preview"},[e("h4",[t._v("–ù–æ–≤–æ–µ —Ñ–æ—Ç–æ:")]),e("img",{attrs:{src:t.photoPreview,alt:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"}})]):t._e(),e("div",{staticClass:"field-hint"},[t._v("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB. –§–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF")])])]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.loading}},[t._v(" "+t._s(t.loading?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":t.isEditMode?"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è":"–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ")+" ")]),e("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.cancel}},[t._v(" –û—Ç–º–µ–Ω–∞ ")]),e("button",{staticClass:"btn-text",attrs:{type:"button"},on:{click:t.resetForm}},[t._v(" –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É ")])]),t.successMessage?e("div",{staticClass:"success-message"},[t._v(" ‚úÖ "+t._s(t.successMessage)+" ")]):t._e(),t.errorMessage?e("div",{staticClass:"error-message"},[t._v(" ‚ùå "+t._s(t.errorMessage)+" ")]):t._e()])])},X=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"radio-content"},[e("span",{staticClass:"radio-icon"},[t._v("üòî")]),e("div",[e("span",{staticClass:"radio-title"},[t._v("–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏")]),e("span",{staticClass:"radio-description"},[t._v("–ò—â–µ—Ç–µ —Å–≤–æ—é –≤–µ—â—å")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"radio-content"},[e("span",{staticClass:"radio-icon"},[t._v("üîç")]),e("div",[e("span",{staticClass:"radio-title"},[t._v("–í—ã –Ω–∞—à–ª–∏")]),e("span",{staticClass:"radio-description"},[t._v("–ù–∞—à–ª–∏ —á—É–∂—É—é –≤–µ—â—å")])])])}];const K={name:"AnnouncementForm",props:{announcementId:{type:String,default:null}},data(){const t=new Date,e=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,16);return{loading:!1,successMessage:"",errorMessage:"",errors:{},photoPreview:null,selectedFile:null,existingPhotos:[],editingData:null,formData:{type:"LOST",title:"",description:"",date:e,place:{city:"",street:"",house:"",placeName:"",extraDescription:""},fee:0},version:0}},computed:{isEditMode(){return!!this.announcementId},currentDateTime(){const t=new Date,e=t.getTimezoneOffset(),s=new Date(t.getTime()-6e4*e);return s.toISOString().slice(0,16)}},mounted(){this.checkAuth(),this.isEditMode&&this.loadAnnouncement()},methods:{checkAuth(){const t=localStorage.getItem("currentUserId");t||this.$router.push("/")},async loadAnnouncement(){if(this.announcementId){this.loading=!0;try{const t=localStorage.getItem("currentUserId"),e=await fetch(`/api/thing/${this.announcementId}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}});if(!e.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è");const s=await e.json();this.editingData={...s},this.existingPhotos=s.photos||[],this.formData={type:s.type||"LOST",title:s.title,description:s.description||"",date:s.date?new Date(s.date).toISOString().slice(0,16):this.formData.date,place:{city:s.place?.city||"",street:s.place?.street||"",house:s.place?.house||"",placeName:s.place?.placeName||"",extraDescription:s.place?.extraDescription||""},fee:s.fee||0},this.version=s.version}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:",t),this.errorMessage="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"}finally{this.loading=!1}}},getPhotoUrl(t){return t.startsWith("http")||t.startsWith("data:")?t:`/api/thing/${this.announcementId}/photo/${t}`},handleImageError(t){t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNlZWVlZWUiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjOTk5OTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+PGZvbnQgc2l6ZT0iMTQiPlBob3RvPC9mb250PjwvdGV4dD48L3N2Zz4="},handleTypeChange(){console.log("–¢–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω –Ω–∞:",this.formData.type)},handleFileUpload(t){const e=t.target.files[0];if(!e)return;if(e.size>5242880)return void(this.errorMessage="–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å. 5MB)");if(!e.type.match("image.*"))return void(this.errorMessage="–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è");this.selectedFile=e;const s=new FileReader;s.onload=t=>{this.photoPreview=t.target.result},s.readAsDataURL(e)},removePhoto(){this.selectedFile=null,this.photoPreview=null,this.$refs.fileInput&&(this.$refs.fileInput.value="")},removeExistingPhoto(t){this.existingPhotos.splice(t,1)},validateForm(){this.errors={};let t=!0;return this.formData.type||(this.errors.type="–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è",t=!1),this.formData.title.trim()||(this.errors.title="–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",t=!1),this.formData.place.city.trim()||(this.errors.city="–ì–æ—Ä–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),this.formData.date||(this.errors.date="–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã",t=!1),this.formData.description.trim()||(this.errors.description="–û–ø–∏—Å–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",t=!1),t},async handleSubmit(){if(this.validateForm()){this.loading=!0,this.successMessage="",this.errorMessage="";try{let t=this.announcementId;const e=localStorage.getItem("currentUserId");let s;const a=this.buildThingPayload();if(this.isEditMode)await this.updateThing(e,t,a),s=this.version+1;else{const i=await this.createThing(e,a);t=i.id,s=i.version}this.selectedFile&&t&&await this.uploadPhoto(e,t,this.selectedFile,s),this.successMessage=this.isEditMode?"–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!":"–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ!",setTimeout(()=>{this.$router.push("/dashboard")},2e3)}catch(t){console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:",t),this.errorMessage=t.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."}finally{this.loading=!1}}},buildThingPayload(){(new Date).toISOString();return this.isEditMode?{title:this.formData.title,fee:this.formData.fee,owner:this.editingData.owner,type:this.formData.type,date:new Date(this.formData.date).toISOString(),place:{city:this.formData.place.city,street:this.formData.place.street||"",house:this.formData.place.house||"",placeName:this.formData.place.placeName||"",extraDescription:this.formData.place.extraDescription||""},description:this.formData.description,photos:this.existingPhotos,id:this.announcementId,createdAt:this.editingData.createdAt,completedAt:this.editingData.completedAt||null,version:this.editingData.version||0}:{title:this.formData.title,fee:this.formData.fee,type:this.formData.type,date:new Date(this.formData.date).toISOString(),place:{city:this.formData.place.city,street:this.formData.place.street||"",house:this.formData.place.house||"",placeName:this.formData.place.placeName||"",extraDescription:this.formData.place.extraDescription||""},description:this.formData.description}},async createThing(t,e){const s=await fetch("/api/things/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e)});if(!s.ok){const t=await s.text();throw new Error(t||"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è")}return await s.json()},async updateThing(t,e,s){const a=await fetch(`/api/thing/${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(s)});if(!a.ok){const t=await a.text();throw new Error(t||"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è")}},async uploadPhoto(t,e,s,a){const i=new FormData;i.append("file",s);const r=await fetch(`/api/thing/${e}/upload-photo?version=${a}`,{method:"POST",headers:{Authorization:t},body:i});if(!r.ok){const t=await r.text();throw new Error(t||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ")}},resetForm(){this.formData={type:"LOST",title:"",description:"",date:(new Date).toISOString().slice(0,16),place:{city:"",street:"",house:"",placeName:"",extraDescription:""},fee:0},this.selectedFile=null,this.photoPreview=null,this.existingPhotos=[],this.editingData=null,this.errors={},this.successMessage="",this.errorMessage="",this.$refs.fileInput&&(this.$refs.fileInput.value="")},cancel(){this.$router.go(-1)}}},tt=K;var et=(0,d.A)(tt,Y,X,!1,null,"0377e8a8",null);const st=et.exports,at={name:"CreateAnnouncement",components:{AnnouncementForm:st}},it=at;var rt=(0,d.A)(it,V,Q,!1,null,null,null);const ot=rt.exports;var nt=function(){var t=this,e=t._self._c;return e("div",[e("AnnouncementForm",{attrs:{"announcement-id":t.announcementId}})],1)},lt=[];const ct={name:"EditAnnouncement",components:{AnnouncementForm:st},computed:{announcementId(){return this.$route.params.id}}},dt=ct;var ut=(0,d.A)(dt,nt,lt,!1,null,null,null);const mt=ut.exports;var ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-announcements-page"},[e("div",{staticClass:"page-header"},[e("h2",[t._v("–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),t.totalItems>0?e("p",{staticClass:"page-subtitle"},[t._v(" –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ "+t._s(t.totalItems)+" "+t._s(t.getAnnouncementsText(t.totalItems))+" ")]):t.loading?t._e():e("p",{staticClass:"page-subtitle"},[t._v(" –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π ")])]),e("MyAnnouncementsList",{ref:"announcementsList",attrs:{announcements:t.announcements,loading:t.loading,showCreateButton:!0,totalItems:t.totalItems}})],1)},pt=[],vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"announcements-list"},[t.showStats?e("div",{staticClass:"list-stats"},[e("span",[t._v("–í—Å–µ–≥–æ: "+t._s(t.totalItems))]),e("span",[t._v("–ê–∫—Ç–∏–≤–Ω—ã—Ö: "+t._s(t.activeCount))])]):t._e(),e("div",{staticClass:"announcements-grid"},[t.loading?e("div",{staticClass:"loading"},[e("div",{staticClass:"spinner"}),e("p",[t._v("–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π...")])]):0===t.announcements.length?e("div",{staticClass:"empty-state"},[e("div",{staticClass:"empty-icon"},[t._v("üì≠")]),e("p",[t._v("–û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")]),t.showCreateButton?e("button",{staticClass:"btn-create",on:{click:t.goToCreate}},[t._v(" üìù –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ")]):t._e()]):e("div",{staticClass:"cards-container"},t._l(t.announcements,function(s){return e("div",{key:s.id,staticClass:"announcement-card"},[e("div",{staticClass:"card-status",class:t.getStatusClass(s)},[t._v(" "+t._s(t.getStatusText(s))+" ")]),s.responseCount>0?e("div",{staticClass:"response-badge"},[t._v(" üí¨ "+t._s(s.responseCount)+" ")]):t._e(),e("div",{staticClass:"card-image",on:{click:function(e){return t.viewDetails(s.id)}}},[s.photos&&s.photos.length>0?e("img",{attrs:{src:t.getFirstPhoto(s),alt:s.title},on:{error:t.handleImageError}}):e("div",{staticClass:"no-image"},[t._v(" üì∑ –ù–µ—Ç —Ñ–æ—Ç–æ ")])]),e("div",{staticClass:"card-content"},[e("h3",{staticClass:"card-title",on:{click:function(e){return t.viewDetails(s.id)}}},[t._v(" "+t._s(s.title)+" ")]),e("div",{staticClass:"card-meta"},[e("span",{staticClass:"meta-item"},[t._v("üèôÔ∏è "+t._s(s.city))]),s.place?.street?e("span",{staticClass:"meta-item"},[t._v(" üìç "+t._s(s.place.street)+t._s(s.place.house?", "+s.place.house:"")+" ")]):t._e(),e("span",{staticClass:"meta-item"},[t._v("üìÖ "+t._s(t.formatDate(s.date)))]),s.color?e("span",{staticClass:"meta-item"},[t._v("üé® "+t._s(s.color))]):t._e()]),e("div",{staticClass:"card-description"},[t._v(" "+t._s(t.truncateText(s.description,120))+" ")]),e("div",{staticClass:"card-footer"},[e("div",{staticClass:"user-info"},[e("span",{staticClass:"user-name"},[t._v("üë§ "+t._s(s.userName))]),e("span",{staticClass:"created-at"},[t._v("–°–æ–∑–¥–∞–Ω–æ: "+t._s(t.formatDateTime(s.createdAt)))]),s.completedAt?e("span",{staticClass:"completed-at"},[t._v(" –ó–∞–≤–µ—Ä—à–µ–Ω–æ: "+t._s(t.formatDateTime(s.completedAt))+" ")]):t._e()]),e("div",{staticClass:"card-actions"},[s.fee>0?e("button",{staticClass:"btn-reward"},[t._v(" üí∞ "+t._s(t.formatCurrency(s.fee))+" ")]):t._e(),s.isActive?e("button",{staticClass:"btn-edit",on:{click:function(e){return t.editAnnouncement(s.id)}}},[t._v(" ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ")]):t._e(),e("button",{staticClass:"btn-view",on:{click:function(e){return t.viewDetails(s.id)}}},[t._v(" üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ ")])])])])])}),0)])])},gt=[];const ft={name:"AnnouncementsList",props:{announcements:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showStats:{type:Boolean,default:!0},showCreateButton:{type:Boolean,default:!1},totalItems:{type:Number,default:0}},computed:{availableCities(){const t=new Set;return this.announcements.forEach(e=>{console.log("items"),console.log(e),e.city&&"–ù–µ —É–∫–∞–∑–∞–Ω"!==e.city&&t.add(e.city)}),Array.from(t).sort()},activeCount(){return this.announcements.filter(t=>t.isActive).length},lostCount(){return this.announcements.filter(t=>"LOST"===t.type).length},foundCount(){return this.announcements.filter(t=>"FOUND"===t.type).length}},methods:{getStatusClass(t){return t.isActive?"FOUND"===t.type?"found":"lost":"completed"},getStatusText(t){return t.isActive?"FOUND"===t.type?"üîç –ù–∞—à—ë–ª":"üòî –ü–æ—Ç–µ—Ä—è–ª":"‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ"},getFirstPhoto(t){if(!t.photos||0===t.photos.length)return"";const e=t.photos[0];return e.startsWith("http")||e.startsWith("data:")?e:`/api/thing/${t.id}/photo/${e}`},handleImageError(t){t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNlZWVlZWUiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjOTk5OTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+PGZvbnQgc2l6ZT0iMTQiPlBob3RvPC9mb250PjwvdGV4dD48L3N2Zz4="},viewDetails(t){localStorage.setItem("isMyDetails",!0),this.$router.push({path:"/details",query:{id:t}})},editAnnouncement(t){this.$router.push(`/edit/${t}`)},goToCreate(){this.$router.push("/create")},formatDate(t){if(!t)return"";const e=new Date(t);return e.toLocaleDateString("ru-RU")},formatDateTime(t){if(!t)return"";const e=new Date(t);return e.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},formatCurrency(t){return t?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(t):"0 ‚ÇΩ"},truncateText(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}}},_t=ft;var Ct=(0,d.A)(_t,vt,gt,!1,null,"196723f6",null);const yt=Ct.exports,wt={name:"MyAnnouncements",components:{MyAnnouncementsList:yt},data(){return{announcements:[],loading:!1,totalItems:0}},created(){this.loadAnnouncements()},watch:{currentPage(){this.loadAnnouncements()}},methods:{async loadAnnouncements(){this.loading=!0;try{const t=localStorage.getItem("currentUserId");if(!t)return void this.$router.push("/");const e=new URLSearchParams;e.append("page",0),e.append("size",100),e.append("sort","createdAt,desc");const s=`/api/things/by-owner?${e.toString()}`,a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}});if(!a.ok)throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${a.status}`);const i=await a.json();console.log("–ó–∞–≥—Ä—É–∂–µ–Ω—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è:",i),this.announcements=this.transformAnnouncements(i.items),this.totalItems=i.total,console.log("–û–±—ä—è–≤–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã:",this.announcements)}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:",t),this.errorMessage="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",this.announcements=[],this.totalItems=0}finally{this.loading=!1}},transformAnnouncements(t){return Array.isArray(t)?t.map(t=>{const e=t.description||"",s=!t.completedAt||new Date(t.completedAt)>new Date,a="FOUND"===t.type;return{id:t.id,owner:t.owner,type:t.type,date:t.date,place:t.place||{},description:e,photos:t.photos||[],createdAt:t.createdAt,completedAt:t.completedAt,version:t.version||0,title:t.title,city:t.place?.city||"–ù–µ —É–∫–∞–∑–∞–Ω",address:t.place?.street||"",lostDate:t.date,fee:t.fee,isActive:s,isFound:a,responseCount:0,userName:"–í—ã",hasResponse:!1}}):[]},getAnnouncementsText(t){return 1===t?"–æ–±—ä—è–≤–ª–µ–Ω–∏–µ":t>=2&&t<=4?"–æ–±—ä—è–≤–ª–µ–Ω–∏—è":"–æ–±—ä—è–≤–ª–µ–Ω–∏–π"}}},Dt=wt;var bt=(0,d.A)(Dt,ht,pt,!1,null,"60543266",null);const At=bt.exports;var It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"all-announcements-page"},[t._m(0),e("div",{staticClass:"page-content"},[e("AnnouncementsList",{attrs:{announcements:t.allAnnouncements,totalPages:t.totalPages,totalCount:t.totalCount,loading:t.loading,"show-filters":!0,"show-stats":!0,"show-create-button":!1,"show-edit-button":!1,"show-pagination":!0,initialPage:t.currentPage+1,savedFilters:t.filters},on:{"apply-filters":t.handleApplyFilters,"clear-filters":t.handleClearFilters,"page-changed":t.handlePageChange}})],1)])},St=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header"},[e("h2",[t._v("–í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),e("p",[t._v("–ò—â–∏—Ç–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –≤–µ—â–∏ –∏–ª–∏ –ø–æ–º–æ–≥–∏—Ç–µ –¥—Ä—É–≥–∏–º –∏—Ö –Ω–∞–π—Ç–∏")])])}],Pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"announcements-list"},[t.showFilters?e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-row"},[e("div",{staticClass:"filter-group"},[e("label",[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localFilters.title,expression:"localFilters.title"}],attrs:{type:"text",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ..."},domProps:{value:t.localFilters.title},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyFilters.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.localFilters,"title",e.target.value)}}})]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–ì–æ—Ä–æ–¥:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localFilters.city,expression:"localFilters.city"}],attrs:{type:"text",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥..."},domProps:{value:t.localFilters.city},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyFilters.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.localFilters,"city",e.target.value)}}})])]),e("div",{staticClass:"filter-row"},[e("div",{staticClass:"filter-group"},[e("label",[t._v("–°—Ç–∞—Ç—É—Å:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.localFilters.status,expression:"localFilters.status"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.localFilters,"status",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"all"}},[t._v("–í—Å–µ")]),e("option",{attrs:{value:"active"}},[t._v("–ê–∫—Ç–∏–≤–Ω—ã–µ")]),e("option",{attrs:{value:"completed"}},[t._v("–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ")])])]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–ü—Ä–∏—á–∏–Ω–∞:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.localFilters.type,expression:"localFilters.type"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.localFilters,"type",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:"all"}},[t._v("–í—Å–µ")]),e("option",{attrs:{value:"lost"}},[t._v("–ü–æ—Ç–µ—Ä—è–ª")]),e("option",{attrs:{value:"found"}},[t._v("–ù–∞—à–µ–ª")])])]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–î–∞—Ç–∞ –ø–æ—Ç–µ—Ä–∏:")]),e("div",{staticClass:"date-input-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.localFilters.lostDate,expression:"localFilters.lostDate"}],attrs:{type:"datetime-local",max:t.currentDateTime},domProps:{value:t.localFilters.lostDate},on:{input:function(e){e.target.composing||t.$set(t.localFilters,"lostDate",e.target.value)}}})])])]),t.errorMessage?e("div",{staticClass:"error-message"},[t._v(" ‚ùå "+t._s(t.errorMessage)+" ")]):t._e(),e("div",{staticClass:"filter-actions"},[e("button",{staticClass:"btn-clear",on:{click:t.clearAllFilters}},[t._v(" ‚úï –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ ")]),e("button",{staticClass:"btn-apply",on:{click:t.applyFilters}},[t._v(" ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")])])]):t._e(),t.showStats?e("div",{staticClass:"list-stats"},[e("span",[t._v("–ù–∞–π–¥–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π: "+t._s(t.totalCount))]),t.hasActiveFilters?e("span",{staticClass:"active-filters-hint"},[t._v(" (–ø—Ä–∏–º–µ–Ω–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã) ")]):t._e()]):t._e(),e("div",{staticClass:"announcements-grid"},[t.loading?e("div",{staticClass:"loading"},[t._v("–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π...")]):0===t.announcements.length?e("div",{staticClass:"empty-state"},[e("p",[t._v("üòî –û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")]),t.hasActiveFilters?e("p",{staticClass:"hint"},[t._v("–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤")]):t._e(),t.showCreateButton?e("button",{staticClass:"btn-create",on:{click:t.goToCreate}},[t._v(" üìù –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ")]):t._e()]):e("div",{staticClass:"cards-container"},t._l(t.announcements,function(s){return e("div",{key:s.id,staticClass:"announcement-card"},[e("div",{staticClass:"card-status",class:s.completedAt?"completed":"FOUND"===s.type?"found":"active"},[t._v(" "+t._s(t.getStatusText(s))+" ")]),e("div",{staticClass:"card-image",on:{click:function(e){return t.viewDetails(s.id)}}},[s.photos&&s.photos.length>0?e("img",{attrs:{src:s.photos[0],alt:s.title}}):e("div",{staticClass:"no-image"},[t._v(" üì∑ –ù–µ—Ç —Ñ–æ—Ç–æ ")])]),e("div",{staticClass:"card-content"},[e("h3",{staticClass:"card-title",on:{click:function(e){return t.viewDetails(s.id)}}},[t._v(" "+t._s(s.title)+" ")]),e("div",{staticClass:"card-meta"},[s.place&&s.place.city?e("span",{staticClass:"meta-item"},[t._v(" üèôÔ∏è "+t._s(s.place.city)+" ")]):t._e(),s.place&&s.place.street?e("span",{staticClass:"meta-item"},[t._v(" üìç "+t._s(s.place.street)+" ")]):t._e(),s.date?e("span",{staticClass:"meta-item"},[t._v(" üìÖ "+t._s(t.formatDate(s.date))+" ")]):t._e(),s.type?e("span",{staticClass:"meta-item"},[t._v(" "+t._s("LOST"===s.type?"üîç –ü–æ—Ç–µ—Ä—è–Ω–æ":"üîç –ù–∞–π–¥–µ–Ω–æ")+" ")]):t._e()]),e("div",{staticClass:"card-description"},[t._v(" "+t._s(t.truncateText(s.description,100))+" ")]),e("div",{staticClass:"card-footer"},[e("div",{staticClass:"user-info"},[s.createdAt?e("span",{staticClass:"created-at"},[t._v(" –°–æ–∑–¥–∞–Ω–æ: "+t._s(t.formatDateTime(s.createdAt))+" ")]):t._e(),s.completedAt?e("span",{staticClass:"completed-at"},[t._v(" –ó–∞–≤–µ—Ä—à–µ–Ω–æ: "+t._s(t.formatDateTime(s.completedAt))+" ")]):t._e()]),e("div",{staticClass:"card-actions"},[s.fee>0?e("button",{staticClass:"btn-reward"},[t._v(" üí∞ "+t._s(t.formatCurrency(s.fee))+" ")]):t._e(),e("button",{staticClass:"btn-view",on:{click:function(e){return t.viewDetails(s.id)}}},[t._v(" üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ ")])])])])])}),0)]),t.showPagination&&t.announcements.length>0?e("div",{staticClass:"pagination"},[e("button",{class:{disabled:1===t.currentPage||t.loading},attrs:{disabled:1===t.currentPage||t.loading},on:{click:function(e){return t.goToPage(t.currentPage-1)}}},[t._v(" ‚Üê –ù–∞–∑–∞–¥ ")]),e("span",[t._v("–°—Ç—Ä–∞–Ω–∏—Ü–∞ "+t._s(t.currentPage)+" –∏–∑ "+t._s(t.totalPages))]),e("button",{class:{disabled:t.currentPage===t.totalPages||t.loading},attrs:{disabled:t.currentPage===t.totalPages||t.loading},on:{click:function(e){return t.goToPage(t.currentPage+1)}}},[t._v(" –í–ø–µ—Ä–µ–¥ ‚Üí ")])]):t._e()])},Ft=[];const Tt={name:"AnnouncementsList",props:{announcements:{type:Array,default:()=>[]},totalPages:{type:Number,default:0},totalCount:{type:Number,default:0},loading:{type:Boolean,default:!1},showFilters:{type:Boolean,default:!0},showStats:{type:Boolean,default:!0},showCreateButton:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},initialPage:{type:Number,default:1},savedFilters:{type:Object,default:()=>({})}},data(){return{localFilters:{title:"",city:"",status:"all",lostDate:""},currentPage:1,errorMessage:"",currentUserId:localStorage.getItem("currentUserId")}},computed:{currentDateTime(){const t=new Date,e=t.getTimezoneOffset(),s=new Date(t.getTime()-6e4*e);return s.toISOString().slice(0,16)},hasActiveFilters(){return Object.entries(this.localFilters).some(([t,e])=>"status"===t?"all"!==e:""!==e)}},watch:{savedFilters:{immediate:!0,handler(t){t&&Object.keys(t).length>0&&this.restoreFiltersFromServer(t)}},initialPage:{immediate:!0,handler(t){t&&t>=1&&(this.currentPage=t)}},totalPages(t){t>0&&this.currentPage>t&&(this.currentPage=t)}},mounted(){this.savedFilters&&Object.keys(this.savedFilters).length>0&&this.restoreFiltersFromServer(this.savedFilters)},methods:{restoreFiltersFromServer(t){if(t.title&&(this.localFilters.title=t.title),t.place&&t.place.city&&(this.localFilters.city=t.place.city),!0===t.completed?this.localFilters.status="completed":!1===t.completed&&(this.localFilters.status="active"),"LOST"===t.type?this.localFilters.type="lost":"FOUND"===t.type&&(this.localFilters.type="found"),t.date){const e=new Date(t.date),s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");this.localFilters.lostDate=`${s}-${a}-${i}T${r}:${o}`}},validateFilters(){return this.localFilters.title&&this.localFilters.city?(this.errorMessage="",!0):(this.errorMessage='–ü–æ–ª—è "–ù–∞–∑–≤–∞–Ω–∏–µ" –∏ "–ì–æ—Ä–æ–¥" –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∫–∞–∑–∞–Ω—ã',!1)},getStatusText(t){return t.completedAt?"‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ":"FOUND"===t.type?"üîç –ù–∞—à—ë–ª":"üîç –ò—â—É—Ç"},applyFilters(){if(!this.validateFilters())return;const t={};if(this.localFilters.title&&(t.title=this.localFilters.title),this.localFilters.city&&(t.place={city:this.localFilters.city}),"completed"===this.localFilters.status?t.completed=!0:"active"===this.localFilters.status&&(t.completed=!1),"lost"===this.localFilters.type?t.type="LOST":"found"===this.localFilters.type&&(t.type="FOUND"),this.localFilters.lostDate){const e=new Date(this.localFilters.lostDate);e.getSeconds()||e.setSeconds(0,0),t.date=e.toISOString(),console.log("–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–∞—è –¥–∞—Ç–∞:",t.date)}console.log("–§–∏–ª—å—Ç—Ä—ã –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞:",t),this.currentPage=1,this.$emit("apply-filters",t)},clearAllFilters(){this.localFilters={title:"",city:"",status:"all",lostDate:""},this.currentPage=1,this.errorMessage="",this.$emit("clear-filters")},goToPage(t){t<1||t>this.totalPages||this.loading||(this.currentPage=t,console.log(`–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É ${t}`),this.$emit("page-changed",t))},prevPage(){this.goToPage(this.currentPage-1)},nextPage(){this.goToPage(this.currentPage+1)},viewDetails(t){localStorage.setItem("isMyDetails",!1),this.$router.push({path:"/details",query:{id:t}})},goToCreate(){this.$router.push("/create")},formatDate(t){if(!t)return"";try{const e=new Date(t);return e.toLocaleDateString("ru-RU")}catch(e){return t}},formatDateTime(t){if(!t)return"";try{const e=new Date(t);return e.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return t}},formatCurrency(t){return t&&0!==t?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(t):"0 ‚ÇΩ"},truncateText(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}}},kt=Tt;var $t=(0,d.A)(kt,Pt,Ft,!1,null,"dea0691c",null);const xt=$t.exports,Ut={name:"AllAnnouncements",components:{AnnouncementsList:xt},data(){return{loading:!1,allAnnouncements:[],totalPages:0,totalCount:0,filters:{},currentPage:0,pageSize:9}},mounted(){this.restoreState(),this.loadAllAnnouncements(this.currentPage,this.filters)},methods:{async loadAllAnnouncements(t,e={}){this.loading=!0,this.currentPage=t;try{const s={};e.title&&(s.title=e.title,s.description=e.title),e.place&&e.place.city&&(s.place={city:e.place.city}),void 0!==e.completed&&(s.completed=e.completed),void 0!==e.type&&(s.type=e.type),e.date&&(s.date=e.date),e.createdAt&&(s.createdAt=e.createdAt),void 0!==e.hasFee&&(s.hasFee=e.hasFee);const a=new URLSearchParams;a.append("page",t),a.append("size",this.pageSize),a.append("sort","createdAt,desc");const i=`/api/things?${a.toString()}`,r=localStorage.getItem("currentUserId");console.log("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:",s);const o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:r},body:JSON.stringify(s)});if(o.ok){const e=await o.json();this.allAnnouncements=e.items,this.totalCount=e.total,this.totalPages=Math.ceil(this.totalCount/this.pageSize),console.log(`–ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ${t+1}, –æ–±—ä—è–≤–ª–µ–Ω–∏–π: ${this.allAnnouncements.length}`)}else console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:",o.status)}catch(s){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:",s)}finally{this.loading=!1,this.saveState()}},handleApplyFilters(t){this.filters=t,this.currentPage=0,console.log("–ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã:",t),this.loadAllAnnouncements(this.currentPage,t),this.saveState()},handleClearFilters(){this.filters={},this.currentPage=0,console.log("–°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"),this.loadAllAnnouncements(this.currentPage,this.filters),this.saveState()},handlePageChange(t){console.log("–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞:",t);const e=t-1;this.currentPage=e,this.loadAllAnnouncements(e,this.filters),this.saveState()},saveState(){try{const t={filters:this.filters,currentPage:this.currentPage,timestamp:(new Date).getTime()};localStorage.setItem("allAnnouncementsState",JSON.stringify(t)),console.log("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:",t)}catch(t){console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:",t)}},restoreState(){try{const t=localStorage.getItem("allAnnouncementsState");if(t){const e=JSON.parse(t);e.filters&&Object.keys(e.filters).length>0?(this.filters=e.filters,console.log("–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã:",this.filters)):this.filters={title:"–∑–æ–Ω—Ç",place:{city:"–ú–æ—Å–∫–≤–∞"}},void 0!==e.currentPage&&null!==e.currentPage&&(this.currentPage=e.currentPage,console.log("–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞:",this.currentPage+1)),console.log("–ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:",e)}else this.filters={title:"–∑–æ–Ω—Ç",place:{city:"–ú–æ—Å–∫–≤–∞"}},this.currentPage=0,console.log("–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é")}catch(t){console.error("–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:",t),this.filters={title:"–∑–æ–Ω—Ç",place:{city:"–ú–æ—Å–∫–≤–∞"}},this.currentPage=0}}},beforeDestroy(){}},Et=Ut;var Nt=(0,d.A)(Et,It,St,!1,null,"f04ecfc4",null);const Ot=Nt.exports;var Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"details-page"},[e("div",{staticClass:"details-header"},[e("button",{staticClass:"btn-back",on:{click:t.goBack}},[t._v(" ‚Üê –ù–∞–∑–∞–¥ ")]),e("h2",[t._v("–î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")])]),e("div",{staticClass:"details-content"},[t.loading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"loading"},[t._v("–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...")])]):t.error?e("div",{staticClass:"error-container"},[e("div",{staticClass:"error-message"},[t._v(" ‚ùå "+t._s(t.error)+" ")]),e("button",{staticClass:"btn-back-to-list",on:{click:t.goToAnnouncements}},[t._v(" –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π ")])]):t.announcement?e("div",{staticClass:"announcement-details"},[e("div",{staticClass:"details-header-info"},[e("div",{staticClass:"title-section"},[e("h1",{staticClass:"announcement-title"},[t._v(t._s(t.announcement.title))]),e("div",{staticClass:"status-badge",class:t.getStatusClass()},[t._v(" "+t._s(t.getStatusText())+" ")])]),e("div",{staticClass:"meta-info"},[e("span",{staticClass:"created-date"},[t._v(" –°–æ–∑–¥–∞–Ω–æ: "+t._s(t.formatDateTime(t.announcement.createdAt))+" ")]),t.announcement.completedAt?e("span",{staticClass:"updated-date"},[t._v(" –ó–∞–≤–µ—Ä—à–µ–Ω–æ: "+t._s(t.formatDateTime(t.announcement.completedAt))+" ")]):t._e()])]),e("div",{staticClass:"details-grid"},[e("div",{staticClass:"left-column"},[e("div",{staticClass:"photo-section"},[t.hasPhotos?e("div",{staticClass:"photo-container"},[e("img",{staticClass:"main-photo",attrs:{src:t.announcement.photos[0],alt:t.announcement.title},on:{click:t.openPhotoModal}})]):e("div",{staticClass:"no-photo"},[e("div",{staticClass:"no-photo-icon"},[t._v("üì∑")]),e("p",[t._v("–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç")])])]),e("div",{staticClass:"description-section"},[e("h3",[t._v("–û–ø–∏—Å–∞–Ω–∏–µ")]),e("div",{staticClass:"description-content"},[t.announcement.description?e("p",[t._v(t._s(t.announcement.description))]):e("p",{staticClass:"no-description"},[t._v("–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")])])])]),e("div",{staticClass:"right-column"},[e("div",{staticClass:"details-section"},[e("h3",[t._v("–î–µ—Ç–∞–ª–∏ "+t._s("LOST"===t.announcement.type?"–ø–æ—Ç–µ—Ä–∏":"–Ω–∞—Ö–æ–¥–∫–∏"))]),e("div",{staticClass:"details-list"},[t.announcement.place?e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üó∫Ô∏è –ì–æ—Ä–æ–¥:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.announcement.place.city||"–ù–µ —É–∫–∞–∑–∞–Ω"))])]):t._e(),t.getFullAddress()?e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üìç –ê–¥—Ä–µ—Å:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.getFullAddress()))])]):t._e(),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üìÖ –î–∞—Ç–∞:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.formatDate(t.announcement.date)))])]),t.announcement.type?e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üìã –¢–∏–ø:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.getTypeText(t.announcement.type)))])]):t._e()])]),t.announcement.fee>0?e("div",{staticClass:"reward-section"},[e("h3",[t._v("–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ")]),e("div",{staticClass:"reward-amount"},[e("span",{staticClass:"reward-icon"},[t._v("üí∞")]),e("span",{staticClass:"reward-value"},[t._v(t._s(t.formatCurrency(t.announcement.fee)))])])]):t._e(),e("div",{staticClass:"author-section"},[e("h3",[t._v("–ê–≤—Ç–æ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),e("div",{staticClass:"author-info"},[e("div",{staticClass:"author-name"},[t._v("üë§ "+t._s(this.ownerName||"–ê–Ω–æ–Ω–∏–º"))]),t.isCurrentUserAuthor?e("div",{staticClass:"author-note"},[e("span",{staticClass:"your-announcement"},[t._v("(–≠—Ç–æ –≤–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ)")])]):t._e()])]),e("div",{staticClass:"action-buttons"},[t.isCurrentUserAuthor?e("button",{staticClass:"btn-edit",on:{click:t.editAnnouncement}},[t._v(" ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ")]):t._e(),t.isCurrentUserAuthor||!t.hasCurrentUserResponded||t.isCompleted?t._e():e("div",{staticClass:"already-responded"},[t._m(0),t._m(1)]),t.isCurrentUserAuthor||t.isCompleted||t.hasCurrentUserResponded?t._e():e("button",{staticClass:"btn-contact",attrs:{disabled:t.isResponding},on:{click:t.respondToAnnouncement}},[t._v(" üìû –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è ")]),t.isCurrentUserAuthor&&!t.isCompleted?e("button",{staticClass:"btn-close",on:{click:t.completeAnnouncement}},[t._v(" ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ")]):t._e(),e("button",{staticClass:"btn-share",on:{click:t.shareAnnouncement}},[t._v(" üîó –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ")])])])]),t.announcement.responses&&t.announcement.responses.length>0?e("div",{staticClass:"responses-section"},[e("div",{staticClass:"responses-header"},[e("h3",[t._v(t._s(t.isCurrentUserAuthor?"–û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ":"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç–∫–ª–∏–∫–∞—Ö"))]),e("div",{staticClass:"responses-count"},[t._v(" üí¨ "+t._s(t.announcement.responses.length)+" "+t._s(t.getResponsesText(t.announcement.responses.length))+" ")])]),t.isCurrentUserAuthor?e("div",{staticClass:"responders-list"},t._l(t.announcement.responses,function(s){return e("div",{key:s.id,staticClass:"responder-card"},[e("div",{staticClass:"responder-avatar"},[t._v(" "+t._s(t.getUserInitials(s.username))+" ")]),e("div",{staticClass:"responder-info"},[e("div",{staticClass:"responder-name"},[t._v(" "+t._s(s.username||"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å")+" "),s.userCity?e("span",{staticClass:"responder-city"},[t._v("üìç "+t._s(s.userCity))]):t._e()]),e("div",{staticClass:"responder-contacts"},[s.phone?e("div",{staticClass:"contact-item"},[e("span",{staticClass:"contact-icon"},[t._v("üì±")]),e("a",{staticClass:"contact-link",attrs:{href:"tel:"+s.phone}},[t._v(t._s(s.phone))])]):t._e(),s.email?e("div",{staticClass:"contact-item"},[e("span",{staticClass:"contact-icon"},[t._v("üìß")]),e("a",{staticClass:"contact-link",attrs:{href:"mailto:"+s.email}},[t._v(t._s(s.email))])]):t._e()]),s.respondedAt?e("div",{staticClass:"responder-date"},[t._v(" –û—Ç–∫–ª–∏–∫–Ω—É–ª—Å—è: "+t._s(t.formatDateTime(s.respondedAt))+" ")]):t._e()]),e("div",{staticClass:"responder-actions"},[s.phone?e("button",{staticClass:"btn-call",on:{click:function(e){return t.callUser(s.phone)}}},[t._v(" –ü–æ–∑–≤–æ–Ω–∏—Ç—å ")]):t._e(),s.email?e("button",{staticClass:"btn-email",on:{click:function(e){return t.emailUser(s.email)}}},[t._v(" –ù–∞–ø–∏—Å–∞—Ç—å ")]):t._e()])])}),0):e("div",{staticClass:"responses-note"},[e("p",[t._v("–ù–∞ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —É–∂–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–æ—Å—å "+t._s(t.announcement.responses.length)+" "+t._s(t.getResponsesText(t.announcement.responses.length)))]),"LOST"===t.announcement.type?e("p",[t._v('–ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ —ç—Ç—É –≤–µ—â—å, –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è" —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∞–≤—Ç–æ—Ä–æ–º')]):e("p",[t._v('–ï—Å–ª–∏ –≤—ã –ø–æ—Ç–µ—Ä—è–ª–∏ —ç—Ç—É –≤–µ—â—å, –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è" —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∞–≤—Ç–æ—Ä–æ–º')])])]):t._e(),t.isCompleted?e("div",{staticClass:"closure-notice"},[e("div",{staticClass:"notice-icon"},[t._v("‚ÑπÔ∏è")]),e("div",{staticClass:"notice-content"},[e("h4",[t._v("–û–±—ä—è–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ")]),e("p",[t._v("–≠—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ. –í–µ—â—å "+t._s("LOST"===t.announcement.type?"–Ω–∞–π–¥–µ–Ω–∞":"–≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü—É")+".")])])]):t._e()]):t._e()]),t.showPhotoModal&&t.hasPhotos?e("div",{staticClass:"photo-modal",on:{click:t.closePhotoModal}},[e("div",{staticClass:"modal-content",on:{click:function(t){t.stopPropagation()}}},[e("button",{staticClass:"modal-close",on:{click:t.closePhotoModal}},[t._v("√ó")]),e("img",{staticClass:"modal-photo",attrs:{src:t.announcement.photos[0],alt:t.announcement.title}})])]):t._e()])},Lt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"response-status"},[e("span",{staticClass:"response-icon"},[t._v("‚úÖ")]),e("span",{staticClass:"response-text"},[t._v("–í—ã —É–∂–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å –Ω–∞ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"response-info"},[e("p",[t._v("–ê–≤—Ç–æ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏, –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Å–º–æ–∂–µ—Ç")])])}];const jt={name:"Details",data(){return{ownerName:null,announcement:null,loading:!1,error:"",showPhotoModal:!1,currentUserId:localStorage.getItem("currentUserId")||null,isResponding:!1,respondedInCurrentSession:!1}},computed:{isCurrentUserAuthor(){return console.log("isCurrentUserAuthor"),console.log(localStorage.getItem("isMyDetails")),"true"===localStorage.getItem("isMyDetails")},isCompleted(){return this.announcement&&null!==this.announcement.completedAt},hasCurrentUserResponded(){return!!(this.currentUserId&&this.announcement&&this.announcement.responses)&&(this.announcement.alreadyResponded||this.respondedInCurrentSession)},hasPhotos(){return this.announcement&&this.announcement.photos&&this.announcement.photos.length>0&&this.announcement.photos[0]}},created(){window.scrollTo(0,0),this.loadAnnouncement()},methods:{async loadAnnouncement(){this.loading=!0,this.error="";try{const t=this.$route.query.id;if(!t)throw new Error("ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω");const e=await fetch(`/api/thing/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.currentUserId}});if(!e.ok){if(404===e.status)throw new Error("–û–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ");throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")}this.announcement=await e.json(),console.log("–ó–∞–≥—Ä—É–∂–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ:",this.announcement),await this.loadOwner()}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:",t),this.error=t.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—ä—è–≤–ª–µ–Ω–∏–∏"}finally{this.loading=!1}},async loadOwner(){this.loading=!0,this.error="";try{if(!this.announcement.owner)throw new Error("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —É–∫–∞–∑–∞–Ω");const t=await fetch(`/api/public/user/${this.announcement.owner}/profile`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.currentUserId}});t.ok&&(this.ownerName=(await t.json()).name)}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:",t)}finally{this.loading=!1}},formatDate(t){if(!t)return"";try{const e=new Date(t);return e.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return t}},formatDateTime(t){if(!t)return"";try{const e=new Date(t);return e.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return t}},formatCurrency(t){return t?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(t):"0 ‚ÇΩ"},getFullAddress(){if(!this.announcement.place)return"";const t=this.announcement.place,e=[];return t.street&&e.push(`—É–ª. ${t.street}`),t.house&&e.push(`–¥. ${t.house}`),t.placeName&&e.push(t.placeName),t.extraDescription&&e.push(t.extraDescription),e.join(", ")},getTypeText(t){const e={LOST:"–ü–æ—Ç–µ—Ä—è–ª",FOUND:"–ù–∞—à–µ–ª"};return e[t]||t},getStatusClass(){return this.isCompleted?"completed":"LOST"===this.announcement.type?"lost":"found"},getStatusText(){return this.isCompleted?"LOST"===this.announcement.type?"‚úÖ –ù–∞–π–¥–µ–Ω–æ":"‚úÖ –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ":"LOST"===this.announcement.type?"üîç –ò—â—É—Ç":"üîç –ù–∞—à—ë–ª"},getResponsesText(t){return 1===t?"—á–µ–ª–æ–≤–µ–∫":t>=2&&t<=4?"—á–µ–ª–æ–≤–µ–∫–∞":"—á–µ–ª–æ–≤–µ–∫"},getUserInitials(t){if(!t)return"?";const e=t.split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():t[0].toUpperCase()},goBack(){this.$router.go(-1)},goToAnnouncements(){this.$router.push("/my_announcements")},editAnnouncement(){this.announcement&&this.announcement.id&&this.$router.push(`/edit/${this.announcement.id}`)},async respondToAnnouncement(){if(this.announcement&&this.announcement.id&&!this.isCompleted){this.isResponding=!0;try{const t=await fetch(`/api/thing/${this.announcement.id}/reponse`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.currentUserId}});if(!t.ok)throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫");alert("–í—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ!"),this.respondedInCurrentSession=!0}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª–∏–∫–µ:",t),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")}finally{this.isResponding=!1}}},async completeAnnouncement(){if(this.announcement&&this.announcement.id&&!this.isCompleted&&confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ?"))try{const t=await fetch(`/api/thing/${this.announcement.id}/complete`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.currentUserId}});if(!t.ok)throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ");this.announcement.completedAt=(new Date).toISOString(),alert("–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:",t),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")}},shareAnnouncement(){navigator.share?navigator.share({title:`${"LOST"===this.announcement.type?"–ü–æ—Ç–µ—Ä—è–Ω–æ":"–ù–∞–π–¥–µ–Ω–æ"}: ${this.announcement.title}`,text:`–ü–æ–º–æ–≥–∏—Ç–µ ${"LOST"===this.announcement.type?"–Ω–∞–π—Ç–∏":"–≤–µ—Ä–Ω—É—Ç—å"} ${this.announcement.description?.substring(0,100)}...`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!"))},openPhotoModal(){this.hasPhotos&&(this.showPhotoModal=!0)},closePhotoModal(){this.showPhotoModal=!1},callUser(t){t&&window.open(`tel:${t}`,"_self")},emailUser(t){t&&window.open(`mailto:${t}`,"_self")}}},Rt=jt;var Bt=(0,d.A)(Rt,Mt,Lt,!1,null,"4792dac0",null);const Gt=Bt.exports;a.Ay.use(k.Ay);const zt=new k.Ay({mode:"history",routes:[{path:"/",name:"Home",component:O},{path:"/dashboard",name:"Dashboard",component:G,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:J,meta:{requiresAuth:!0}},{path:"/create",name:"CreateAnnouncement",component:ot,meta:{requiresAuth:!0}},{path:"/edit/:id",name:"EditAnnouncement",component:mt,meta:{requiresAuth:!0}},{path:"/my_announcements",name:"MyAnnouncements",component:At,meta:{requiresAuth:!0}},{path:"/all_announcements",name:"AllAnnouncements",component:Ot,meta:{requiresAuth:!0}},{path:"/details",name:"Details",component:Gt,meta:{requiresAuth:!0}}]});zt.beforeEach((t,e,s)=>{t.meta.requiresAuth&&!localStorage.getItem("currentUser")?s("/"):s()});const Zt=zt;a.Ay.config.productionTip=!1,new a.Ay({router:Zt,render:t=>t(T)}).$mount("#app")}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,s),r.exports}s.m=t,(()=>{var t=[];s.O=(e,a,i,r)=>{if(!a){var o=1/0;for(d=0;d<t.length;d++){for(var[a,i,r]=t[d],n=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every(t=>s.O[t](a[l]))?a.splice(l--,1):(n=!1,r<o&&(o=r));if(n){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}})(),(()=>{s.d=(t,e)=>{for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={524:0};s.O.j=e=>0===t[e];var e=(e,a)=>{var i,r,[o,n,l]=a,c=0;if(o.some(e=>0!==t[e])){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var d=l(s)}for(e&&e(a);c<o.length;c++)r=o[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(d)},a=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var a=s.O(void 0,[504],()=>s(85));a=s.O(a)})();
//# sourceMappingURL=app.77136018.js.map