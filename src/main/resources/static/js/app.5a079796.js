(()=>{"use strict";var t={252:(t,e,s)=>{var a=s(471),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("AppHeader",{on:{"login-clicked":function(e){t.showLogin=!0}}}),e("main",{staticClass:"main-content"},[e("router-view")],1),e("AppFooter"),t.showLogin?e("LoginModal",{on:{close:function(e){t.showLogin=!1},"login-success":t.handleLoginSuccess}}):t._e()],1)},r=[],i=function(){var t=this,e=t._self._c;return e("header",{staticClass:"header"},[e("div",{staticClass:"header-content"},[e("h1",{staticClass:"header-title",on:{click:t.goHome}},[t._v("–ü–æ—Ç–µ—Ä—è—à–∫–∏")]),e("div",{staticClass:"header-actions"},[t.currentUser?e("span",{staticClass:"user-greeting"},[t._v(" –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, "+t._s(t.currentUser)+"! ")]):t._e(),t.currentUser?e("button",{staticClass:"profile-btn",on:{click:t.goToProfile}},[t._v(" üë§ –ü—Ä–æ—Ñ–∏–ª—å ")]):t._e(),t.currentUser?e("button",{staticClass:"logout-btn",on:{click:t.logout}},[t._v(" –í—ã–π—Ç–∏ ")]):e("button",{staticClass:"login-btn",on:{click:function(e){return t.$emit("login-clicked")}}},[t._v(" –í–æ–π—Ç–∏ ")])])])])},o=[];const l={name:"AppHeader",inject:["eventBus"],data(){return{currentUser:null}},mounted(){console.log("HEADER CREATE"),this.checkAuth(),window.addEventListener("storage",this.checkAuth),this.$root.$on("auth-changed",this.checkAuth),this.eventBus.$on("user-name-changed",this.checkAuth)},beforeDestroy(){console.log("HEADER DESTROY"),window.removeEventListener("storage",this.checkAuth),this.$root.$off("auth-changed",this.checkAuth),this.eventBus.$off("user-name-changed",this.checkAuth)},methods:{checkAuth(){const t=localStorage.getItem("currentUser");console.log("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Header:",t),this.currentUser=t},logout(){console.log("üö™ –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã"),localStorage.removeItem("currentUser"),localStorage.removeItem("currentUserId"),this.currentUser=null,this.$root.$emit("auth-changed"),this.$router.push("/"),"/"!==this.$route.path?this.$router.push("/"):console.log("üìç –£–∂–µ –Ω–∞—Ö–æ–¥–∏–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ")},goHome(){this.$router.push("/")},goToProfile(){this.$router.push("/profile")}}},c=l;var u=s(656),d=(0,u.A)(c,i,o,!1,null,"21ed8b72",null);const m=d.exports;var h=function(){var t=this;t._self._c;return t._m(0)},v=[function(){var t=this,e=t._self._c;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"footer-content"},[e("div",{staticClass:"contact-info"},[e("p",[t._v("üìß Email: pomogi@poteryashki.ru")]),e("p",[t._v("üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 (800) 555-35-35")]),e("p",[t._v("‚è∞ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ")])]),e("div",{staticClass:"footer-links"},[e("a",{attrs:{href:"#"}},[t._v("–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏")]),e("a",{attrs:{href:"#"}},[t._v("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ")]),e("a",{attrs:{href:"#"}},[t._v("–ü–æ–º–æ—â—å")])])])])}];const p={name:"AppFooter"},g=p;var f=(0,u.A)(g,h,v,!1,null,"31dd6010",null);const _=f.exports;var C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-overlay",on:{click:function(e){return t.$emit("close")}}},[e("div",{staticClass:"modal",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"modal-header"},[e("h3",[t._v("–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è")]),e("button",{staticClass:"close-btn",on:{click:function(e){return t.$emit("close")}}},[t._v("√ó")])]),e("div",{staticClass:"tabs"},[e("button",{staticClass:"tab-btn",class:{active:"login"===t.activeTab},on:{click:function(e){t.activeTab="login"}}},[t._v(" –í–æ–π—Ç–∏ ")]),e("button",{staticClass:"tab-btn",class:{active:"register"===t.activeTab},on:{click:function(e){t.activeTab="register"}}},[t._v(" –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ")])]),"login"===t.activeTab?e("form",{staticClass:"auth-form",on:{submit:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"login-email"}},[t._v("Email:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.email,expression:"loginData.email"}],class:{error:t.loginErrors.email},attrs:{type:"email",id:"login-email",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email"},domProps:{value:t.loginData.email},on:{input:function(e){e.target.composing||t.$set(t.loginData,"email",e.target.value)}}}),t.loginErrors.email?e("div",{staticClass:"field-error"},[t._v(t._s(t.loginErrors.email))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"login-password"}},[t._v("–ü–∞—Ä–æ–ª—å:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.password,expression:"loginData.password"}],class:{error:t.loginErrors.password},attrs:{type:"password",id:"login-password",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å"},domProps:{value:t.loginData.password},on:{input:function(e){e.target.composing||t.$set(t.loginData,"password",e.target.value)}}}),t.loginErrors.password?e("div",{staticClass:"field-error"},[t._v(t._s(t.loginErrors.password))]):t._e()]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.loginLoading}},[t._v(" "+t._s(t.loginLoading?"–í—Ö–æ–¥...":"–í–æ–π—Ç–∏")+" ")]),e("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.clearLoginForm}},[t._v(" –û—á–∏—Å—Ç–∏—Ç—å ")])]),t.loginError?e("div",{staticClass:"error-message"},[t._v(" "+t._s(t.loginError)+" ")]):t._e()]):e("form",{staticClass:"auth-form",on:{submit:function(e){return e.preventDefault(),t.handleRegister.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"register-name"}},[t._v("–ò–º—è:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.registerData.name,expression:"registerData.name"}],class:{error:t.registerErrors.name},attrs:{type:"text",id:"register-name",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"},domProps:{value:t.registerData.name},on:{input:function(e){e.target.composing||t.$set(t.registerData,"name",e.target.value)}}}),t.registerErrors.name?e("div",{staticClass:"field-error"},[t._v(t._s(t.registerErrors.name))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"register-email"}},[t._v("Email:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.registerData.email,expression:"registerData.email"}],class:{error:t.registerErrors.email},attrs:{type:"email",id:"register-email",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email"},domProps:{value:t.registerData.email},on:{input:function(e){e.target.composing||t.$set(t.registerData,"email",e.target.value)}}}),t.registerErrors.email?e("div",{staticClass:"field-error"},[t._v(t._s(t.registerErrors.email))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"register-password"}},[t._v("–ü–∞—Ä–æ–ª—å:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.registerData.password,expression:"registerData.password"}],class:{error:t.registerErrors.password},attrs:{type:"password",id:"register-password",required:"",placeholder:"–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å"},domProps:{value:t.registerData.password},on:{input:function(e){e.target.composing||t.$set(t.registerData,"password",e.target.value)}}}),t.registerErrors.password?e("div",{staticClass:"field-error"},[t._v(t._s(t.registerErrors.password))]):t._e(),e("div",{staticClass:"field-hint"},[t._v("–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤")])]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.registerLoading}},[t._v(" "+t._s(t.registerLoading?"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...":"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è")+" ")]),e("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.clearRegisterForm}},[t._v(" –û—á–∏—Å—Ç–∏—Ç—å ")])])]),e("div",{staticClass:"form-switch"},["login"===t.activeTab?e("span",[t._v(" –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? "),e("button",{staticClass:"switch-link",on:{click:function(e){t.activeTab="register"}}},[t._v("–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å")])]):e("span",[t._v(" –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? "),e("button",{staticClass:"switch-link",on:{click:function(e){t.activeTab="login"}}},[t._v("–í–æ–π–¥–∏—Ç–µ")])])])])])},y=[];const w={name:"LoginModal",data(){return{activeTab:"login",loginData:{email:"",password:""},loginLoading:!1,loginError:"",loginErrors:{},registerData:{name:"",email:"",password:""},registerLoading:!1,registerErrors:{}}},methods:{async handleLogin(){if(this.loginLoading=!0,this.loginError="",this.loginErrors={},this.validateLoginForm())try{const t=await fetch("/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:this.loginData.email,password:this.loginData.password})});if(!t.ok){const e=await t.text();throw new Error(e||"–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞")}const e=await t.json();if(!e.id)throw new Error("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞");localStorage.setItem("currentUser",e.name||this.loginData.email.split("@")[0]),localStorage.setItem("currentUserId",e.id),localStorage.setItem("userEmail",this.loginData.email),this.$root.$emit("auth-changed"),this.$emit("login-success",e.name||this.loginData.email.split("@")[0])}catch(t){console.error("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:",t),this.loginError="–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"}finally{this.loginLoading=!1}else this.loginLoading=!1},validateLoginForm(){let t=!0;return this.loginErrors={},this.loginData.email.trim()?this.isValidEmail(this.loginData.email)||(this.loginErrors.email="–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email",t=!1):(this.loginErrors.email="Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),this.loginData.password.trim()?this.loginData.password.length<6&&(this.loginErrors.password="–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤",t=!1):(this.loginErrors.password="–ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),t},clearLoginForm(){this.loginData={email:"",password:""},this.loginError="",this.loginErrors={}},async handleRegister(){if(this.registerLoading=!0,this.registerErrors={},this.validateRegisterForm())try{const t=await fetch("/registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:this.registerData.name,userEmail:this.registerData.email,password:this.registerData.password})});if(!t.ok){const e=await t.text();throw new Error(e||"–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏")}const e=await t.json();if(!e.id)throw new Error("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞");localStorage.setItem("currentUser",e.name||this.loginData.email.split("@")[0]),localStorage.setItem("currentUserId",e.id),localStorage.setItem("userEmail",this.loginData.email),this.$root.$emit("auth-changed"),this.$emit("login-success",e.name||this.loginData.email.split("@")[0])}catch(t){console.error("–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:",t)}finally{this.registerLoading=!1}else this.registerLoading=!1},validateRegisterForm(){let t=!0;return this.registerErrors={},this.registerData.name.trim()?this.registerData.name.length<2&&(this.registerErrors.name="–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 2 —Å–∏–º–≤–æ–ª–æ–≤",t=!1):(this.registerErrors.name="–ò–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",t=!1),this.registerData.email.trim()?this.isValidEmail(this.registerData.email)||(this.registerErrors.email="–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email",t=!1):(this.registerErrors.email="Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),this.registerData.password.trim()?this.registerData.password.length<6&&(this.registerErrors.password="–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤",t=!1):(this.registerErrors.password="–ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),t},clearRegisterForm(){this.registerData={name:"",email:"",password:""},this.registerErrors={}},isValidEmail(t){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(t)}}},b=w;var A=(0,u.A)(b,C,y,!1,null,"7d9a10bb",null);const D=A.exports,$=new a.Ay,k={name:"App",components:{AppHeader:m,AppFooter:_,LoginModal:D},data(){return{showLogin:!1}},provide(){return{eventBus:$}},mounted(){this.$root.$on("show-login-modal",()=>{console.log("üîî –°–æ–±—ã—Ç–∏–µ show-login-modal –ø–æ–ª—É—á–µ–Ω–æ –≤ App.vue!"),console.log("üîÑ –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏..."),this.showLogin=!0}),this.checkAuth()},beforeDestroy(){this.$root.$off("show-login-modal")},methods:{checkAuth(){const t=localStorage.getItem("currentUser");console.log("üîç –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:",t)},handleLoginSuccess(t){console.log("‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ –≤ App.vue! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",t),this.showLogin=!1,this.$router.push("/dashboard")}}},P=k;var U=(0,u.A)(P,n,r,!1,null,null,null);const T=U.exports;var E=s(173),I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-page"},[e("section",{staticClass:"hero-section"},[e("div",{staticClass:"hero-content"},[e("h2",[t._v("–ù–∞–π–¥–∏ —Ç–æ, —á—Ç–æ –ø–æ—Ç–µ—Ä—è–ª")]),e("p",[t._v("–í–µ—Ä–Ω–∏ —Ä–∞–¥–æ—Å—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü—É –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–π –≤–µ—â–∏")]),e("button",{staticClass:"cta-button",on:{click:t.handleStartSearch}},[t._v(" –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ ")])])]),t._m(0),t._m(1),t._m(2),t._m(3)])},R=[function(){var t=this,e=t._self._c;return e("section",{staticClass:"info-section"},[e("h2",[t._v("–û –Ω–∞—Å")]),e("div",{staticClass:"content-card"},[e("p",[t._v('"–ü–æ—Ç–µ—Ä—è—à–∫–∏" - —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è –ø–æ–º–æ—â–∏ –ª—é–¥—è–º –≤ –ø–æ–∏—Å–∫–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –≤–µ—â–µ–π –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏—Ö –≤–ª–∞–¥–µ–ª—å—Ü–∞–º.')]),e("p",[t._v("–ú—ã –æ–±—ä–µ–¥–∏–Ω—è–µ–º –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–µ—Ä—è–ª–∏ —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ, –∏ —Ç–µ—Ö, –∫—Ç–æ –Ω–∞—à–µ–ª —á—É–∂—É—é –≤–µ—â—å –∏ —Ö–æ—á–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –µ–µ –≤–ª–∞–¥–µ–ª—å—Ü—É.")])])])},function(){var t=this,e=t._self._c;return e("section",{staticClass:"info-section"},[e("h2",[t._v("–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞")]),e("div",{staticClass:"content-card"},[e("p",[t._v("–ù–∞—à–∞ –≥–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å - —Å–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–ø–æ–º–æ—â–∏, –≥–¥–µ –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏—Ö –≤ –ø–æ–∏—Å–∫–µ —É—Ç–µ—Ä—è–Ω–Ω—ã—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π.")]),e("p",[t._v("–ú—ã —Å—Ç—Ä–µ–º–∏–º—Å—è —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –≤–µ—â–µ–π –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑—å –º–µ–∂–¥—É –ª—é–¥—å–º–∏ —á–µ—Ä–µ–∑ –¥–æ–±—Ä—ã–µ –ø–æ—Å—Ç—É–ø–∫–∏.")])])])},function(){var t=this,e=t._self._c;return e("section",{staticClass:"info-section"},[e("h2",[t._v("–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–µ")]),e("div",{staticClass:"features-grid"},[e("div",{staticClass:"feature-card"},[e("div",{staticClass:"feature-icon"},[t._v("üìù")]),e("h3",[t._v("–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –ø–æ—Ç–µ—Ä–µ")]),e("p",[t._v("–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–π –≤–µ—â–∏, –¥–æ–±–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ")])]),e("div",{staticClass:"feature-card"},[e("div",{staticClass:"feature-icon"},[t._v("üîç")]),e("h3",[t._v("–ù–∞–π—Ç–∏ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –≤–µ—â–∏")]),e("p",[t._v("–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–µ—â–∞—Ö –≤ –≤–∞—à–µ–º –≥–æ—Ä–æ–¥–µ")])]),e("div",{staticClass:"feature-card"},[e("div",{staticClass:"feature-icon"},[t._v("üí∞")]),e("h3",[t._v("–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ")]),e("p",[t._v("–ù–∞–∑–Ω–∞—á—å—Ç–µ –¥–µ–Ω–µ–∂–Ω–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –∑–∞ –≤–æ–∑–≤—Ä–∞—Ç —Ü–µ–Ω–Ω–æ–π –≤–µ—â–∏")])]),e("div",{staticClass:"feature-card"},[e("div",{staticClass:"feature-icon"},[t._v("üì±")]),e("h3",[t._v("–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫")]),e("p",[t._v("–ò—â–∏—Ç–µ –≤–µ—â–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é –∏ –¥–∞—Ç–µ")])])])])},function(){var t=this,e=t._self._c;return e("section",{staticClass:"stats-section"},[e("div",{staticClass:"stats-grid"},[e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v("1,000+")]),e("div",{staticClass:"stat-label"},[t._v("–≤–µ—Ä–Ω—É—Ç—ã—Ö –≤–µ—â–µ–π")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v("500+")]),e("div",{staticClass:"stat-label"},[t._v("–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v("50+")]),e("div",{staticClass:"stat-label"},[t._v("–≥–æ—Ä–æ–¥–æ–≤")])]),e("div",{staticClass:"stat-item"},[e("div",{staticClass:"stat-number"},[t._v("95%")]),e("div",{staticClass:"stat-label"},[t._v("–¥–æ–≤–æ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")])])])])}];const F={name:"Home",data(){return{currentUserId:null}},mounted(){this.checkAuth(),window.addEventListener("storage",this.checkAuth),this.$root.$on("auth-changed",this.checkAuth)},beforeDestroy(){window.removeEventListener("storage",this.checkAuth),this.$root.$off("auth-changed",this.checkAuth)},methods:{checkAuth(){this.currentUserId=localStorage.getItem("currentUserId")},handleStartSearch(){null==this.currentUserId?this.$root.$emit("show-login-modal"):this.$router.push("/dashboard")}}},S=F;var x=(0,u.A)(S,I,R,!1,null,"9937d636",null);const M=x.exports;var L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-page"},[t._m(0),e("div",{staticClass:"dashboard-content"},[e("div",{staticClass:"dashboard-grid"},[e("div",{staticClass:"dashboard-card stats-card"},[e("h3",[t._v("–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")]),t.loading?e("div",{staticClass:"loading"},[t._v("–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...")]):e("div",{staticClass:"stats"},[e("div",{staticClass:"stat"},[e("span",{staticClass:"stat-value"},[t._v(t._s(t.statistics.activeAnnouncements))]),e("span",{staticClass:"stat-label"},[t._v("–ê–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π")])]),e("div",{staticClass:"stat"},[e("span",{staticClass:"stat-value"},[t._v(t._s(t.statistics.resolvedAnnouncements))]),e("span",{staticClass:"stat-label"},[t._v("–ù–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–µ—â–µ–π")])]),e("div",{staticClass:"stat"},[e("span",{staticClass:"stat-value"},[t._v(t._s(t.formatCurrency(t.statistics.totalRemuneration)))]),e("span",{staticClass:"stat-label"},[t._v("–û–±—â–µ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ")])]),e("div",{staticClass:"stat"},[e("span",{staticClass:"stat-value"},[t._v(t._s(t.formatCurrency(t.statistics.maxRemuneration)))]),e("span",{staticClass:"stat-label"},[t._v("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ")])])]),t.error?e("div",{staticClass:"error-message"},[t._v(t._s(t.error))]):t._e()]),e("div",{staticClass:"dashboard-card ads-card"},[e("h3",[t._v("–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),e("div",{staticClass:"ads-content"},[t.loadingResponses?e("div",{staticClass:"loading"},[t._v("–ó–∞–≥—Ä—É–∑–∫–∞...")]):0===t.responsesCount?e("div",{staticClass:"empty-state"},[e("p",[t._v("–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π")]),e("button",{staticClass:"action-btn primary create-btn",on:{click:t.createAnnouncement}},[t._v(" –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ")])]):e("div",{staticClass:"responses-state"},[e("div",{staticClass:"responses-info"},[e("div",{staticClass:"responses-count"},[e("span",{staticClass:"count-number"},[t._v(t._s(t.responsesCount))]),e("span",{staticClass:"count-text"},[t._v(" "+t._s(t.getResponsesText(t.responsesCount))+" –Ω–∞ –≤–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è ")])]),e("p",{staticClass:"responses-hint"},[t._v("–õ—é–¥–∏ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å –Ω–∞ –≤–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –≤–µ—â–∞—Ö")])]),e("button",{staticClass:"action-btn primary view-btn",on:{click:t.viewAnnouncementsWithResponses}},[t._v(" –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å –æ—Ç–≤–µ—Ç–∞–º–∏ ")]),e("button",{staticClass:"action-btn gray view-all-btn",on:{click:t.viewAllMyAnnouncements}},[t._v(" –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –º–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è ")])])])]),e("div",{staticClass:"dashboard-card actions-card"},[e("h3",[t._v("–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è")]),e("div",{staticClass:"action-buttons"},[e("button",{staticClass:"action-btn primary",on:{click:t.createAnnouncement}},[t._v(" üìù –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –ø–æ—Ç–µ—Ä–µ ")]),e("button",{staticClass:"action-btn gray",on:{click:t.findItem}},[t._v(" üîç –ù–∞–π—Ç–∏ –≤–µ—â—å ")]),e("button",{staticClass:"action-btn gray",on:{click:t.setReward}},[t._v(" üí∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ ")]),e("button",{staticClass:"action-btn gray",on:{click:t.goToProfile}},[t._v(" üë§ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å ")])])])])])])},N=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-header"},[e("h2",[t._v("–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç")]),e("p",[t._v("–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–∏–º–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏")])])}];const O={name:"Dashboard",inject:["eventBus"],data(){return{currentUser:null,currentUserId:null,loading:!1,loadingResponses:!1,error:"",responsesCount:0,statistics:{activeAnnouncements:0,resolvedAnnouncements:0,totalRemuneration:0,maxRemuneration:0}}},mounted(){this.checkAuth(),this.loadStatistics(),this.loadResponsesCount(),this.$root.$on("auth-changed",()=>{this.checkAuth(),this.loadStatistics(),this.loadResponsesCount()})},beforeDestroy(){this.$root.$off("auth-changed")},methods:{checkAuth(){const t=localStorage.getItem("currentUser"),e=localStorage.getItem("currentUserId");console.log("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Dashboard:"),console.log("üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",t),console.log("üÜî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:",e),this.currentUser=t,this.currentUserId=e,t&&e||(console.log("‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é"),this.$router.push("/"))},async loadStatistics(){if(this.currentUserId){console.log("üìä –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è ID:",this.currentUserId),this.loading=!0,this.error="";try{const t=[{key:"activeAnnouncements",url:`/active_announcement?id=${this.currentUserId}`},{key:"resolvedAnnouncements",url:`/resolved_announcement?id=${this.currentUserId}`},{key:"totalRemuneration",url:`/total_remuneration?id=${this.currentUserId}`},{key:"maxRemuneration",url:`/max_remuneration?id=${this.currentUserId}`}],e=t.map(async t=>{console.log(`üì§ –ó–∞–ø—Ä–æ—Å –Ω–∞ ${t.url}`);const e=await fetch(t.url);if(!e.ok)throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ ${t.url}: ${e.status}`);const s=await e.text(),a=parseInt(s)||0;return console.log(`üì• –û—Ç–≤–µ—Ç –æ—Ç ${t.url}:`,a),{key:t.key,value:a}}),s=await Promise.all(e);s.forEach(t=>{this.statistics[t.key]=t.value}),console.log("‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:",this.statistics)}catch(t){console.error("üí• –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:",t),this.error="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",this.statistics={activeAnnouncements:0,resolvedAnnouncements:0,totalRemuneration:0,maxRemuneration:0}}finally{this.loading=!1}}else console.log("‚ö†Ô∏è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏")},async loadResponsesCount(){if(this.currentUserId){console.log("üìû –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∫–ª–∏–∫–æ–≤ –¥–ª—è ID:",this.currentUserId),this.loadingResponses=!0;try{const t=await fetch(`/count_responses?id=${this.currentUserId}`);if(!t.ok)throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${t.status}`);const e=await t.text();this.responsesCount=parseInt(e)||0,console.log("‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫–ª–∏–∫–æ–≤:",this.responsesCount)}catch(t){console.error("üí• –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∫–ª–∏–∫–æ–≤:",t),this.responsesCount=0}finally{this.loadingResponses=!1}}else console.log("‚ö†Ô∏è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –æ—Ç–∫–ª–∏–∫–æ–≤")},getResponsesText(t){return 1===t?"–æ—Ç–∫–ª–∏–∫":t>=2&&t<=4?"–æ—Ç–∫–ª–∏–∫–∞":"–æ—Ç–∫–ª–∏–∫–æ–≤"},formatCurrency(t){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(t)},createAnnouncement(){this.$router.push("/create")},goToProfile(){this.$router.push("/profile")},findItem(){this.$router.push("/all_announcements")},setReward(){this.$router.push("/my_announcements")},viewAnnouncementsWithResponses(){this.$router.push({path:"/my_announcements",query:{filter:"has_response"}})},viewAllMyAnnouncements(){this.$router.push("/my_announcements")}}},B=O;var j=(0,u.A)(B,L,N,!1,null,"cce5f400",null);const q=j.exports;var H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile-page"},[t._m(0),e("div",{staticClass:"profile-content"},[e("div",{staticClass:"profile-card"},[e("div",{staticClass:"profile-avatar"},[e("div",{staticClass:"avatar-circle"},[e("span",{staticClass:"avatar-text"},[t._v(t._s(t.avatarInitial))])]),t.profile.dateCreating?e("div",{staticClass:"registration-date"},[t._v(" –ù–∞ —Å–µ—Ä–≤–∏—Å–µ —Å "+t._s(t.formatDate(t.profile.dateCreating))+" ")]):t._e()]),e("form",{staticClass:"profile-form",on:{submit:function(e){return e.preventDefault(),t.saveProfile.apply(null,arguments)}}},[e("div",{staticClass:"form-section"},[e("h3",[t._v("–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.name,expression:"profile.name"}],class:{error:t.errors.name},attrs:{type:"text",id:"name",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"},domProps:{value:t.profile.name},on:{input:function(e){e.target.composing||t.$set(t.profile,"name",e.target.value)}}}),t.errors.name?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.name))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"phone"}},[t._v("–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.phone,expression:"profile.phone"}],attrs:{type:"tel",id:"phone",placeholder:"+7 (999) 123-45-67"},domProps:{value:t.profile.phone},on:{input:function(e){e.target.composing||t.$set(t.profile,"phone",e.target.value)}}}),e("div",{staticClass:"field-hint"},[t._v("–§–æ—Ä–º–∞—Ç: +7 (999) 123-45-67")])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"city"}},[t._v("–ì–æ—Ä–æ–¥ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.city,expression:"profile.city"}],attrs:{type:"text",id:"city",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≥–æ—Ä–æ–¥"},domProps:{value:t.profile.city},on:{input:function(e){e.target.composing||t.$set(t.profile,"city",e.target.value)}}})])]),e("div",{staticClass:"form-section"},[e("h3",[t._v("–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.email,expression:"profile.email"}],attrs:{type:"email",id:"email",placeholder:"example@mail.ru"},domProps:{value:t.profile.email},on:{input:function(e){e.target.composing||t.$set(t.profile,"email",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏")]),e("div",{staticClass:"readonly-field"},[t._v(" "+t._s(t.profile.dateCreating?t.formatDate(t.profile.dateCreating):"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+" ")])])]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.loading}},[t._v(" "+t._s(t.loading?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è")+" ")]),e("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.loadProfile}},[t._v(" –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ ")]),e("button",{staticClass:"btn-text",attrs:{type:"button"},on:{click:t.goBack}},[t._v(" ‚Üê –ù–∞–∑–∞–¥ ")])]),t.successMessage?e("div",{staticClass:"success-message"},[t._v(" ‚úÖ "+t._s(t.successMessage)+" ")]):t._e(),t.errorMessage?e("div",{staticClass:"error-message"},[t._v(" ‚ùå "+t._s(t.errorMessage)+" ")]):t._e()])])])])},J=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"profile-header"},[e("h2",[t._v("–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")]),e("p",[t._v("–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–∏–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏")])])}];const Y={name:"Profile",inject:["eventBus"],data(){return{loading:!1,loadingProfile:!1,successMessage:"",errorMessage:"",errors:{},profile:{id:null,name:"",phone:"",city:"",email:"",dateCreating:null}}},computed:{avatarInitial(){return this.profile.name?this.profile.name.charAt(0).toUpperCase():"?"}},mounted(){this.checkAuth(),this.loadProfile(),this.$root.$on("auth-changed",this.checkAuth)},beforeDestroy(){this.$root.$off("auth-changed")},methods:{checkAuth(){const t=localStorage.getItem("currentUser"),e=localStorage.getItem("currentUserId");console.log("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ:"),console.log("üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",t),console.log("üÜî ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:",e),t&&e?(this.profile.id=e,t!==this.profile.name&&(console.log("üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω–∏ –∏–∑ localStorage:",t),this.profile.name=t)):(console.log("‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é"),this.$router.push("/"))},async loadProfile(){const t=localStorage.getItem("currentUserId");if(t){console.log("üì• –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è ID:",t),this.loadingProfile=!0,this.errorMessage="";try{const e=await fetch(`/profile_data?id=${t}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();console.log("‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—É—á–µ–Ω —Å —Å–µ—Ä–≤–µ—Ä–∞:",s),this.profile={...this.profile,name:s.name||"",phone:s.phone||"",city:s.city||"",email:s.email||"",dateCreating:s.dateCreating||null};const a=localStorage.getItem("currentUser");s.name&&a!==s.name&&(console.log(`üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –≤ localStorage: ${a} ‚Üí ${s.name}`),localStorage.setItem("currentUser",s.name),this.$root.$emit("auth-changed"),this.eventBus.$emit("user-name-changed",s.name)),this.successMessage="–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã",setTimeout(()=>{this.successMessage=""},3e3)}catch(e){console.error("üí• –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:",e),this.errorMessage="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Å —Å–µ—Ä–≤–µ—Ä–∞",this.loadFromLocalStorage()}finally{this.loadingProfile=!1}}else console.log("‚ö†Ô∏è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω")},loadFromLocalStorage(){console.log("üì• –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏–∑ localStorage –∫–∞–∫ fallback");const t=localStorage.getItem("userProfile");if(t)try{const e=JSON.parse(t);this.profile={...this.profile,...e}}catch(e){console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ localStorage:",e)}},async saveProfile(){if(console.log("üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä..."),this.loading=!0,this.successMessage="",this.errorMessage="",this.errors={},!this.profile.name.trim())return this.errors.name="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",void(this.loading=!1);try{const t=localStorage.getItem("currentUserId");if(!t)throw new Error("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω");const e={id:t,name:this.profile.name,phone:this.profile.phone,city:this.profile.city,email:this.profile.email};console.log("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä:",e);const s=await fetch("/update_profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();if(console.log("‚úÖ –û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:",a),!0!==a)throw new Error("–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª false");{localStorage.setItem("userProfile",JSON.stringify(this.profile));const t=localStorage.getItem("currentUser");t!==this.profile.name?(console.log(`üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${t} ‚Üí ${this.profile.name}`),localStorage.setItem("currentUser",this.profile.name),this.$root.$emit("auth-changed"),this.eventBus.$emit("user-name-changed",this.profile.name),this.successMessage=`–ò–º—è —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ "${this.profile.name}"!`):this.successMessage="–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!"}setTimeout(()=>{this.successMessage=""},3e3)}catch(t){console.error("üí• –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:",t),this.errorMessage="–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.",localStorage.setItem("userProfile",JSON.stringify(this.profile))}finally{this.loading=!1}},goBack(){this.$router.go(-1)},formatDate(t){try{const e=new Date(t);return e.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"}}}},W=Y;var G=(0,u.A)(W,H,J,!1,null,"27adef0b",null);const K=G.exports;var V=function(){var t=this,e=t._self._c;return e("div",[e("AnnouncementForm")],1)},z=[],Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"announcement-form-page"},[e("div",{staticClass:"form-header"},[e("h2",[t._v(t._s(t.isEditMode?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è":"–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è"))]),e("p",[t._v(t._s(t.isEditMode?"–í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ":"–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–π –≤–µ—â–∏"))])]),e("form",{staticClass:"announcement-form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-section type-section"},[e("h3",[t._v("–¢–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),e("div",{staticClass:"radio-group"},[e("label",{staticClass:"radio-option",class:{selected:"lost"===t.formData.announcementType}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.announcementType,expression:"formData.announcementType"}],attrs:{type:"radio",value:"lost"},domProps:{checked:t._q(t.formData.announcementType,"lost")},on:{change:[function(e){return t.$set(t.formData,"announcementType","lost")},t.handleTypeChange]}}),t._m(0)]),e("label",{staticClass:"radio-option",class:{selected:"found"===t.formData.announcementType}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.announcementType,expression:"formData.announcementType"}],attrs:{type:"radio",value:"found"},domProps:{checked:t._q(t.formData.announcementType,"found")},on:{change:[function(e){return t.$set(t.formData,"announcementType","found")},t.handleTypeChange]}}),t._m(1)])]),t.errors.announcementType?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.announcementType))]):t._e()]),e("div",{staticClass:"form-section"},[e("h3",[t._v("–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ –≤–µ—â–∏ *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.title,expression:"formData.title"}],class:{error:t.errors.title},attrs:{type:"text",id:"title",required:"",placeholder:"found"===t.formData.announcementType?"–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏, –ù–∞–π–¥–µ–Ω–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω, –ù–∞–π–¥–µ–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫":"–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–ª—é—á–∏ –æ—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã, iPhone 13, –ö–æ—à–µ–ª–µ–∫",maxlength:"100"},domProps:{value:t.formData.title},on:{input:function(e){e.target.composing||t.$set(t.formData,"title",e.target.value)}}}),t.errors.title?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.title))]):t._e(),e("div",{staticClass:"field-hint"},[t._v("–ú–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤")])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"category"}},[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏—è")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.category,expression:"formData.category"}],class:{error:t.errors.category},attrs:{id:"category"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.formData,"category",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:""}},[t._v("–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é")]),e("option",{attrs:{value:"ELECTRONICS"}},[t._v("–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞")]),e("option",{attrs:{value:"DOCUMENTS"}},[t._v("–î–æ–∫—É–º–µ–Ω—Ç—ã")]),e("option",{attrs:{value:"KEYS"}},[t._v("–ö–ª—é—á–∏")]),e("option",{attrs:{value:"WALLET"}},[t._v("–ö–æ—à–µ–ª–µ–∫/–î–µ–Ω—å–≥–∏")]),e("option",{attrs:{value:"JEWELRY"}},[t._v("–£–∫—Ä–∞—à–µ–Ω–∏—è")]),e("option",{attrs:{value:"CLOTHES"}},[t._v("–û–¥–µ–∂–¥–∞")]),e("option",{attrs:{value:"ANIMALS"}},[t._v("–ñ–∏–≤–æ—Ç–Ω—ã–µ")]),e("option",{attrs:{value:"BAGS"}},[t._v("–°—É–º–∫–∏/–†—é–∫–∑–∞–∫–∏")]),e("option",{attrs:{value:"OTHER"}},[t._v("–î—Ä—É–≥–æ–µ")])]),t.errors.category?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.category))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.description,expression:"formData.description"}],attrs:{id:"description",rows:"4",placeholder:"found"===t.formData.announcementType?"–û–ø–∏—à–∏—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—É—é –≤–µ—â—å –ø–æ–¥—Ä–æ–±–Ω–æ: –≥–¥–µ –Ω–∞—à–ª–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏...":"–û–ø–∏—à–∏—Ç–µ –≤–µ—â—å –ø–æ–¥—Ä–æ–±–Ω–æ: –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–µ...",maxlength:"1000"},domProps:{value:t.formData.description},on:{input:function(e){e.target.composing||t.$set(t.formData,"description",e.target.value)}}}),e("div",{staticClass:"field-hint"},[t._v(t._s(t.formData.description.length)+"/1000 —Å–∏–º–≤–æ–ª–æ–≤")])])]),e("div",{staticClass:"form-section"},[e("h3",[t._v(t._s("found"===t.formData.announcementType?"–ú–µ—Å—Ç–æ –∏ –≤—Ä–µ–º—è –Ω–∞—Ö–æ–¥–∫–∏":"–ú–µ—Å—Ç–æ –∏ –≤—Ä–µ–º—è –ø–æ—Ç–µ—Ä–∏"))]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group half"},[e("label",{attrs:{for:"city"}},[t._v("–ì–æ—Ä–æ–¥ *")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.city,expression:"formData.city"}],class:{error:t.errors.city},attrs:{type:"text",id:"city",required:"",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–æ—Å–∫–≤–∞"},domProps:{value:t.formData.city},on:{input:function(e){e.target.composing||t.$set(t.formData,"city",e.target.value)}}}),t.errors.city?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.city))]):t._e()]),e("div",{staticClass:"form-group half"},[e("label",{attrs:{for:"address"}},[t._v("–ê–¥—Ä–µ—Å")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],attrs:{type:"text",id:"address",placeholder:"found"===t.formData.announcementType?"–ì–¥–µ –∏–º–µ–Ω–Ω–æ –Ω–∞—à–ª–∏ –≤–µ—â—å":"–£–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞"},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"lostDate"}},[t._v(t._s("found"===t.formData.announcementType?"–î–∞—Ç–∞ –Ω–∞—Ö–æ–¥–∫–∏ *":"–î–∞—Ç–∞ –ø–æ—Ç–µ—Ä–∏ *"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.lostDate,expression:"formData.lostDate"}],class:{error:t.errors.lostDate},attrs:{type:"date",id:"lostDate",required:"",max:t.today},domProps:{value:t.formData.lostDate},on:{input:function(e){e.target.composing||t.$set(t.formData,"lostDate",e.target.value)}}}),t.errors.lostDate?e("div",{staticClass:"field-error"},[t._v(t._s(t.errors.lostDate))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"color"}},[t._v("–¶–≤–µ—Ç –≤–µ—â–∏")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.color,expression:"formData.color"}],attrs:{type:"text",id:"color",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: —á–µ—Ä–Ω—ã–π, –∫—Ä–∞—Å–Ω—ã–π, —Å–∏–Ω–∏–π —Å –±–µ–ª—ã–º"},domProps:{value:t.formData.color},on:{input:function(e){e.target.composing||t.$set(t.formData,"color",e.target.value)}}})])]),e("div",{staticClass:"form-section"},[e("h3",[t._v(t._s("found"===t.formData.announcementType?"–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –Ω–∞—Ö–æ–¥–∫–∏":"–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è"))]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"reward"}},[t._v("–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ (—Ä—É–±.)")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.reward,expression:"formData.reward",modifiers:{number:!0}}],attrs:{type:"number",id:"reward",placeholder:"0",min:"0",step:"100"},domProps:{value:t.formData.reward},on:{input:function(e){e.target.composing||t.$set(t.formData,"reward",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),"found"===t.formData.announcementType?e("div",{staticClass:"field-hint"},[t._v(" –£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∑–∞ –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞—Ö–æ–¥–∫–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é) ")]):e("div",{staticClass:"field-hint"},[t._v(" –£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É, –∫–æ—Ç–æ—Ä—É—é –≥–æ—Ç–æ–≤—ã –∑–∞–ø–ª–∞—Ç–∏—Ç—å –∑–∞ –≤–æ–∑–≤—Ä–∞—Ç ")])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"photo"}},[t._v("–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –≤–µ—â–∏")]),e("div",{staticClass:"file-upload"},[e("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",id:"photo",accept:"image/*"},on:{change:t.handleFileUpload}}),e("label",{staticClass:"file-label",attrs:{for:"photo"}},[t.formData.photo?e("span",[t._v("–§–∞–π–ª –≤—ã–±—Ä–∞–Ω: "+t._s(t.formData.photo.name))]):e("span",[t._v("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª")])]),t.formData.photo?e("button",{staticClass:"btn-remove",attrs:{type:"button"},on:{click:t.removePhoto}},[t._v(" √ó ")]):t._e()]),t.photoPreview?e("div",{staticClass:"preview"},[e("img",{attrs:{src:t.photoPreview,alt:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"}})]):t._e(),e("div",{staticClass:"field-hint"},[t._v("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB. –§–æ—Ä–º–∞—Ç—ã: JPG, PNG")])])]),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.loading}},[t._v(" "+t._s(t.loading?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":t.isEditMode?"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è":"–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ")+" ")]),e("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.cancel}},[t._v(" –û—Ç–º–µ–Ω–∞ ")]),e("button",{staticClass:"btn-text",attrs:{type:"button"},on:{click:t.resetForm}},[t._v(" –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É ")])]),t.successMessage?e("div",{staticClass:"success-message"},[t._v(" ‚úÖ "+t._s(t.successMessage)+" ")]):t._e(),t.errorMessage?e("div",{staticClass:"error-message"},[t._v(" ‚ùå "+t._s(t.errorMessage)+" ")]):t._e()])])},X=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"radio-content"},[e("span",{staticClass:"radio-icon"},[t._v("üòî")]),e("div",[e("span",{staticClass:"radio-title"},[t._v("–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏")]),e("span",{staticClass:"radio-description"},[t._v("–ò—â–µ—Ç–µ —Å–≤–æ—é –≤–µ—â—å")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"radio-content"},[e("span",{staticClass:"radio-icon"},[t._v("üîç")]),e("div",[e("span",{staticClass:"radio-title"},[t._v("–í—ã –Ω–∞—à–ª–∏")]),e("span",{staticClass:"radio-description"},[t._v("–ù–∞—à–ª–∏ —á—É–∂—É—é –≤–µ—â—å")])])])}];const Z={name:"AnnouncementForm",props:{announcementId:{type:String,default:null}},data(){return{loading:!1,successMessage:"",errorMessage:"",errors:{},photoPreview:null,formData:{announcementType:"lost",title:"",category:"",description:"",city:"",address:"",lostDate:"",color:"",reward:0,photo:null}}},computed:{isEditMode(){return!!this.announcementId},today(){return(new Date).toISOString().split("T")[0]}},mounted(){this.checkAuth(),this.isEditMode&&this.loadAnnouncement()},methods:{checkAuth(){const t=localStorage.getItem("currentUserId");t||this.$router.push("/")},async loadAnnouncement(){if(this.announcementId){this.loading=!0;try{const t=await fetch(`/announcements/${this.announcementId}`);if(!t.ok)throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏");const e=await t.json(),s=e.isFound?"found":"lost";this.formData={announcementType:s,title:e.title||"",category:e.category||"",description:e.description||"",city:e.city||"",address:e.address||"",lostDate:e.lostDate?e.lostDate.split("T")[0]:"",color:e.color||"",reward:e.reward||0,photo:null},e.photoUrl&&(this.photoPreview=e.photoUrl)}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:",t),this.errorMessage="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ"}finally{this.loading=!1}}},handleTypeChange(){console.log(this.formData.announcementType),console.log(this.formData.announcementType)},handleFileUpload(t){const e=t.target.files[0];if(!e)return;if(e.size>5242880)return void(this.errorMessage="–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å. 5MB)");if(!e.type.match("image.*"))return void(this.errorMessage="–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è");this.formData.photo=e;const s=new FileReader;s.onload=t=>{this.photoPreview=t.target.result},s.readAsDataURL(e)},removePhoto(){this.formData.photo=null,this.photoPreview=null,this.$refs.fileInput.value=""},validateForm(){this.errors={};let t=!0;return this.formData.announcementType||(this.errors.announcementType="–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è",t=!1),this.formData.title.trim()||(this.errors.title="–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",t=!1),this.formData.city.trim()||(this.errors.city="–ì–æ—Ä–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω",t=!1),this.formData.lostDate||(this.errors.lostDate="–î–∞—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞",t=!1),t},async handleSubmit(){if(this.validateForm()){this.loading=!0,this.successMessage="",this.errorMessage="",console.log(this.formData.announcementType),console.log("found"===this.formData.announcementType),console.log("found"==this.formData.announcementType);try{const t=localStorage.getItem("currentUserId"),e=localStorage.getItem("currentUser");if(!t)throw new Error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");const s={title:this.formData.title,category:this.formData.category||"",description:this.formData.description||"",city:this.formData.city,address:this.formData.address||"",lostDate:this.formData.lostDate,color:this.formData.color||"",reward:this.formData.reward||0,userId:t,userName:e,isFound:"found"===this.formData.announcementType};if(this.formData.photo){const t=await this.convertFileToBase64(this.formData.photo);s.photoBase64=t.split(",")[1],s.photoName=this.formData.photo.name,s.photoContentType=this.formData.photo.type}const a=this.isEditMode?`/announcements/${this.announcementId}`:"/announcements",n=this.isEditMode?"PUT":"POST",r=await fetch(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){const t=await r.text();throw new Error(t||"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞")}await r.json();this.successMessage=this.isEditMode?"–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!":"–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ!",setTimeout(()=>{this.$router.push("/dashboard")},2e3)}catch(t){console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:",t),this.errorMessage=t.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."}finally{this.loading=!1}}},resetForm(){this.formData={announcementType:"lost",title:"",category:"",description:"",city:"",address:"",lostDate:"",color:"",reward:0,photo:null},this.photoPreview=null,this.errors={},this.successMessage="",this.errorMessage="",this.$refs.fileInput&&(this.$refs.fileInput.value="")},cancel(){this.$router.go(-1)}}},tt=Z;var et=(0,u.A)(tt,Q,X,!1,null,"aad1c14e",null);const st=et.exports,at={name:"CreateAnnouncement",components:{AnnouncementForm:st}},nt=at;var rt=(0,u.A)(nt,V,z,!1,null,null,null);const it=rt.exports;var ot=function(){var t=this,e=t._self._c;return e("div",[e("AnnouncementForm",{attrs:{"announcement-id":t.announcementId}})],1)},lt=[];const ct={name:"EditAnnouncement",components:{AnnouncementForm:st},computed:{announcementId(){return this.$route.params.id}}},ut=ct;var dt=(0,u.A)(ut,ot,lt,!1,null,null,null);const mt=dt.exports;var ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-announcements-page"},[e("div",{staticClass:"page-header"},[e("h2",[t._v("–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),t.filteredAnnouncementsCount>0?e("p",{staticClass:"page-subtitle"},[t._v(" –£ –≤–∞—Å "+t._s(t.filteredAnnouncementsCount)+" "+t._s(t.getAnnouncementsText(t.filteredAnnouncementsCount))+" "),t.hasResponsesFilter?e("span",{staticClass:"filter-notice"},[t._v("(—Å –æ—Ç–∫–ª–∏–∫–∞–º–∏)")]):t._e()]):t._e()]),e("MyAnnouncementsList",{ref:"announcementsList",attrs:{announcements:t.announcements,loading:t.loading,showCreateButton:!0,initialFilters:t.initialFilters},on:{"filters-changed":t.handleFiltersChange}})],1)},vt=[],pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"announcements-list"},[t.showFilters?e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-group toggle-filter"},[e("label",{staticClass:"toggle-label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.hasResponse,expression:"filters.hasResponse"}],staticClass:"toggle-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.filters.hasResponse)?t._i(t.filters.hasResponse,null)>-1:t.filters.hasResponse},on:{change:[function(e){var s=t.filters.hasResponse,a=e.target,n=!!a.checked;if(Array.isArray(s)){var r=null,i=t._i(s,r);a.checked?i<0&&t.$set(t.filters,"hasResponse",s.concat([r])):i>-1&&t.$set(t.filters,"hasResponse",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.filters,"hasResponse",n)},t.applyFilters]}}),e("span",{staticClass:"toggle-slider"}),e("span",{staticClass:"toggle-text"},[t._v("–ï—Å—Ç—å –æ—Ç–≤–µ—Ç")])])]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–ì–æ—Ä–æ–¥:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.city,expression:"filters.city"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"city",e.target.multiple?s:s[0])},t.applyFilters]}},[e("option",{attrs:{value:""}},[t._v("–í—Å–µ –≥–æ—Ä–æ–¥–∞")]),t._l(t.availableCities,function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})],2)]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏—è:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.category,expression:"filters.category"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"category",e.target.multiple?s:s[0])},t.applyFilters]}},[e("option",{attrs:{value:""}},[t._v("–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏")]),t._l(t.availableCategories,function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})],2)]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–°—Ç–∞—Ç—É—Å:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.status,expression:"filters.status"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"status",e.target.multiple?s:s[0])},t.applyFilters]}},[e("option",{attrs:{value:"all"}},[t._v("–í—Å–µ")]),e("option",{attrs:{value:"active"}},[t._v("–ê–∫—Ç–∏–≤–Ω—ã–µ")]),e("option",{attrs:{value:"inactive"}},[t._v("–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ")])])]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–î–∞—Ç–∞ –ø–æ—Ç–µ—Ä–∏:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.dateRange,expression:"filters.dateRange"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"dateRange",e.target.multiple?s:s[0])},t.applyFilters]}},[e("option",{attrs:{value:"all"}},[t._v("–ó–∞ –≤—Å—ë –≤—Ä–µ–º—è")]),e("option",{attrs:{value:"today"}},[t._v("–°–µ–≥–æ–¥–Ω—è")]),e("option",{attrs:{value:"week"}},[t._v("–ó–∞ –Ω–µ–¥–µ–ª—é")]),e("option",{attrs:{value:"month"}},[t._v("–ó–∞ –º–µ—Å—è—Ü")])])]),t.hasActiveFilters?e("button",{staticClass:"btn-clear",on:{click:t.clearFilters}},[t._v(" ‚úï –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")]):t._e()]):t._e(),t.showStats?e("div",{staticClass:"list-stats"},[e("span",[t._v("–ù–∞–π–¥–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π: "+t._s(t.filteredAnnouncements.length))]),"active"===t.filters.status?e("span",[t._v("–ê–∫—Ç–∏–≤–Ω—ã—Ö: "+t._s(t.activeCount))]):t._e(),"inactive"===t.filters.status?e("span",[t._v("–ù–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö: "+t._s(t.inactiveCount))]):t._e(),t.filters.hasResponse?e("span",[t._v("–° –æ—Ç–≤–µ—Ç–∞–º–∏: "+t._s(t.hasResponseCount))]):t._e()]):t._e(),e("div",{staticClass:"announcements-grid"},[t.loading?e("div",{staticClass:"loading"},[t._v("–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π...")]):0===t.filteredAnnouncements.length?e("div",{staticClass:"empty-state"},[t.filters.hasResponse?e("p",[t._v("üòî –ù–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –æ—Ç–≤–µ—Ç–∞–º–∏")]):e("p",[t._v("üòî –û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")]),t.hasActiveFilters&&!t.filters.hasResponse?e("p",{staticClass:"hint"},[t._v("–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤")]):t.filters.hasResponse?e("p",{staticClass:"hint"},[t._v("–ü–æ–∫–∞ —á—Ç–æ –Ω–∞ –≤–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª—Å—è")]):e("p",{staticClass:"hint"},[t._v("–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π")]),t.showCreateButton&&!t.filters.hasResponse?e("button",{staticClass:"btn-create",on:{click:t.goToCreate}},[t._v(" üìù –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ")]):t._e()]):e("div",{staticClass:"cards-container"},t._l(t.paginatedAnnouncements,function(s){return e("div",{key:s.id,staticClass:"announcement-card"},[e("div",{staticClass:"card-status",class:s.isActive?s.isFound?"found":"active":"inactive"},[t._v(" "+t._s(s.isActive?s.isFound?"üîç –ù–∞—à–ª–∏":"üîç –ò—â—É—Ç":"‚úÖ –ù–∞–π–¥–µ–Ω–æ")+" ")]),s.responseCount>0?e("div",{staticClass:"response-badge"},[t._v(" üí¨ "+t._s(s.responseCount)+" ")]):t._e(),e("div",{staticClass:"card-image",on:{click:function(e){return t.viewDetails(s.id)}}},[s.photoUrl?e("img",{attrs:{src:s.photoUrl,alt:s.title}}):e("div",{staticClass:"no-image"},[t._v(" üì∑ –ù–µ—Ç —Ñ–æ—Ç–æ ")])]),e("div",{staticClass:"card-content"},[e("h3",{staticClass:"card-title",on:{click:function(e){return t.viewDetails(s.id)}}},[t._v(" "+t._s(s.title)+" ")]),e("div",{staticClass:"card-meta"},[e("span",{staticClass:"meta-item"},[t._v("üèôÔ∏è "+t._s(s.city))]),s.address?e("span",{staticClass:"meta-item"},[t._v("üìç "+t._s(s.address))]):t._e(),e("span",{staticClass:"meta-item"},[t._v("üìÖ "+t._s(t.formatDate(s.lostDate)))]),s.color?e("span",{staticClass:"meta-item"},[t._v("üé® "+t._s(s.color))]):t._e()]),e("div",{staticClass:"card-description"},[t._v(" "+t._s(t.truncateText(s.description,100))+" ")]),e("div",{staticClass:"card-footer"},[e("div",{staticClass:"user-info"},[e("span",{staticClass:"user-name"},[t._v("üë§ "+t._s(s.userName))]),e("span",{staticClass:"created-at"},[t._v("–°–æ–∑–¥–∞–Ω–æ: "+t._s(t.formatDateTime(s.createdAt)))]),s.updatedAt!==s.createdAt?e("span",{staticClass:"updated-at"},[t._v(" –û–±–Ω–æ–≤–ª–µ–Ω–æ: "+t._s(t.formatDateTime(s.updatedAt))+" ")]):t._e()]),e("div",{staticClass:"card-actions"},[s.reward>0?e("button",{staticClass:"btn-reward"},[t._v(" üí∞ "+t._s(t.formatCurrency(s.reward))+" ")]):t._e(),e("button",{staticClass:"btn-edit",on:{click:function(e){return t.editAnnouncement(s.id)}}},[t._v(" ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ")]),e("button",{staticClass:"btn-view",on:{click:function(e){return t.viewDetails(s.id)}}},[t._v(" üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ ")])])])])])}),0)]),t.showPagination&&t.filteredAnnouncements.length>0?e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v("‚Üê –ù–∞–∑–∞–¥")]),e("span",[t._v("–°—Ç—Ä–∞–Ω–∏—Ü–∞ "+t._s(t.currentPage)+" –∏–∑ "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v("–í–ø–µ—Ä–µ–¥ ‚Üí")])]):t._e()])},gt=[];const ft={name:"AnnouncementsList",props:{announcements:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showFilters:{type:Boolean,default:!0},showStats:{type:Boolean,default:!0},showCreateButton:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},itemsPerPage:{type:Number,default:12},initialFilters:{type:Object,default:()=>({})}},data(){return{filters:{city:"",category:"",status:"all",dateRange:"all",hasResponse:!1},currentPage:1,currentUserId:localStorage.getItem("currentUserId")}},computed:{availableCities(){const t=new Set;return this.announcements.forEach(e=>{e.city&&t.add(e.city)}),Array.from(t).sort()},availableCategories(){const t=new Set;return this.announcements.forEach(e=>{e.category&&t.add(e.category)}),Array.from(t).sort()},hasActiveFilters(){return Object.values(this.filters).some(t=>"all"!==t&&""!==t&&!1!==t)},hasResponseFilterActive(){return!0===this.filters.hasResponse},filteredAnnouncements(){let t=[...this.announcements];if(this.filters.city&&(t=t.filter(t=>t.city===this.filters.city)),this.filters.category&&(t=t.filter(t=>t.category===this.filters.category)),"active"===this.filters.status?t=t.filter(t=>!0===t.isActive):"inactive"===this.filters.status&&(t=t.filter(t=>!1===t.isActive)),"all"!==this.filters.dateRange){const e=new Date;let s;switch(this.filters.dateRange){case"today":s=new Date(e.getFullYear(),e.getMonth(),e.getDate());break;case"week":s=new Date(e.getTime()-6048e5);break;case"month":s=new Date(e.getFullYear(),e.getMonth()-1,e.getDate());break}t=t.filter(t=>{const e=new Date(t.lostDate);return e>=s})}return this.filters.hasResponse&&(t=t.filter(t=>t.responseCount>0)),t},paginatedAnnouncements(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredAnnouncements.slice(t,e)},totalPages(){return Math.ceil(this.filteredAnnouncements.length/this.itemsPerPage)},activeCount(){return this.announcements.filter(t=>!0===t.isActive).length},inactiveCount(){return this.announcements.filter(t=>!1===t.isActive).length},hasResponseCount(){return this.announcements.filter(t=>t.responseCount>0).length}},watch:{initialFilters:{immediate:!0,handler(t){t&&Object.keys(t).length>0&&(this.filters={...this.filters,...t},this.applyFilters())}},filters:{handler(){this.currentPage=1,this.$emit("filters-changed",this.filters)},deep:!0}},methods:{applyFilters(){this.$emit("filters-applied",this.filters)},clearFilters(){this.filters={city:"",category:"",status:"all",dateRange:"all",hasResponse:!1},this.$emit("filters-cleared")},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},viewDetails(t){this.$router.push({path:"/details",query:{id:t}})},editAnnouncement(t){this.$router.push(`/edit/${t}`)},goToCreate(){this.$router.push("/create")},formatDate(t){if(!t)return"";const e=new Date(t);return e.toLocaleDateString("ru-RU")},formatDateTime(t){if(!t)return"";const e=new Date(t);return e.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},formatCurrency(t){return t?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(t):"0 ‚ÇΩ"},truncateText(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}}},_t=ft;var Ct=(0,u.A)(_t,pt,gt,!1,null,"01195c4c",null);const yt=Ct.exports,wt={name:"MyAnnouncements",components:{MyAnnouncementsList:yt},data(){return{announcements:[],loading:!1,initialFilters:{},currentFilters:{}}},computed:{filteredAnnouncementsCount(){return this.announcements.filter(t=>(!this.currentFilters.hasResponse||0!==t.responseCount)&&(!("active"===this.currentFilters.status&&!t.isActive)&&(("inactive"!==this.currentFilters.status||!t.isActive)&&((!this.currentFilters.city||t.city===this.currentFilters.city)&&(!this.currentFilters.category||t.category===this.currentFilters.category))))).length},hasResponsesFilter(){return!0===this.currentFilters.hasResponse}},created(){this.checkUrlFilters(),this.loadAnnouncements()},watch:{"$route.query"(t){this.checkUrlFilters()}},methods:{checkUrlFilters(){"has_response"===this.$route.query.filter?this.initialFilters={hasResponse:!0}:this.initialFilters={}},async loadAnnouncements(){this.loading=!0;try{const t=localStorage.getItem("currentUserId");if(!t)return void this.$router.push("/");const e=await fetch(`/announcements/user/${t}`);if(!e.ok)throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${e.status}`);const s=await e.json();console.log("–ó–∞–≥—Ä—É–∂–µ–Ω—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è:",s),this.announcements=s.map(t=>({...t,responseCount:t.responses?t.responses.length:0,city:t.city||"–ù–µ —É–∫–∞–∑–∞–Ω",category:t.category||"–î—Ä—É–≥–æ–µ",userName:t.userName||"–ê–Ω–æ–Ω–∏–º",isActive:void 0===t.isActive||t.isActive})),console.log("–û–±—ä—è–≤–ª–µ–Ω–∏—è —Å responseCount:",this.announcements)}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:",t),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")}finally{this.loading=!1}},handleFiltersChange(t){this.currentFilters=t},getAnnouncementsText(t){return 1===t?"–æ–±—ä—è–≤–ª–µ–Ω–∏–µ":t>=2&&t<=4?"–æ–±—ä—è–≤–ª–µ–Ω–∏—è":"–æ–±—ä—è–≤–ª–µ–Ω–∏–π"}}},bt=wt;var At=(0,u.A)(bt,ht,vt,!1,null,"3ccf8ee3",null);const Dt=At.exports;var $t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"all-announcements-page"},[t._m(0),e("div",{staticClass:"page-content"},[e("AnnouncementsList",{attrs:{announcements:t.allAnnouncements,loading:t.loading,"show-filters":!0,"show-stats":!0,"show-create-button":!1,"show-edit-button":!1,"show-pagination":!0},on:{"filters-changed":t.handleFiltersChanged}})],1)])},kt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header"},[e("h2",[t._v("–í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),e("p",[t._v("–ò—â–∏—Ç–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –≤–µ—â–∏ –∏–ª–∏ –ø–æ–º–æ–≥–∏—Ç–µ –¥—Ä—É–≥–∏–º –∏—Ö –Ω–∞–π—Ç–∏")])])}],Pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"announcements-list"},[t.showFilters?e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-group"},[e("label",[t._v("–ì–æ—Ä–æ–¥:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.city,expression:"filters.city"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"city",e.target.multiple?s:s[0])},t.applyFilters]}},[e("option",{attrs:{value:""}},[t._v("–í—Å–µ –≥–æ—Ä–æ–¥–∞")]),t._l(t.availableCities,function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})],2)]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏—è:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.category,expression:"filters.category"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"category",e.target.multiple?s:s[0])},t.applyFilters]}},[e("option",{attrs:{value:""}},[t._v("–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏")]),t._l(t.availableCategories,function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})],2)]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–°—Ç–∞—Ç—É—Å:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.status,expression:"filters.status"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"status",e.target.multiple?s:s[0])},t.applyFilters]}},[e("option",{attrs:{value:"all"}},[t._v("–í—Å–µ")]),e("option",{attrs:{value:"active"}},[t._v("–ê–∫—Ç–∏–≤–Ω—ã–µ")]),e("option",{attrs:{value:"inactive"}},[t._v("–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ")])])]),e("div",{staticClass:"filter-group"},[e("label",[t._v("–î–∞—Ç–∞ –ø–æ—Ç–µ—Ä–∏:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.dateRange,expression:"filters.dateRange"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filters,"dateRange",e.target.multiple?s:s[0])},t.applyFilters]}},[e("option",{attrs:{value:"all"}},[t._v("–ó–∞ –≤—Å—ë –≤—Ä–µ–º—è")]),e("option",{attrs:{value:"today"}},[t._v("–°–µ–≥–æ–¥–Ω—è")]),e("option",{attrs:{value:"week"}},[t._v("–ó–∞ –Ω–µ–¥–µ–ª—é")]),e("option",{attrs:{value:"month"}},[t._v("–ó–∞ –º–µ—Å—è—Ü")])])]),t.hasActiveFilters?e("button",{staticClass:"btn-clear",on:{click:t.clearFilters}},[t._v(" ‚úï –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")]):t._e()]):t._e(),t.showStats?e("div",{staticClass:"list-stats"},[e("span",[t._v("–ù–∞–π–¥–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π: "+t._s(t.filteredAnnouncements.length))]),"active"===t.filters.status?e("span",[t._v("–ê–∫—Ç–∏–≤–Ω—ã—Ö: "+t._s(t.activeCount))]):t._e(),"inactive"===t.filters.status?e("span",[t._v("–ù–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö: "+t._s(t.inactiveCount))]):t._e()]):t._e(),e("div",{staticClass:"announcements-grid"},[t.loading?e("div",{staticClass:"loading"},[t._v("–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π...")]):0===t.filteredAnnouncements.length?e("div",{staticClass:"empty-state"},[e("p",[t._v("üòî –û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")]),t.hasActiveFilters?e("p",{staticClass:"hint"},[t._v("–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤")]):t._e(),t.showCreateButton?e("button",{staticClass:"btn-create",on:{click:t.goToCreate}},[t._v(" üìù –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ")]):t._e()]):e("div",{staticClass:"cards-container"},t._l(t.filteredAnnouncements,function(s){return e("div",{key:s.id,staticClass:"announcement-card"},[e("div",{staticClass:"card-status",class:s.isActive?s.isFound?"found":"active":"inactive"},[t._v(" "+t._s(s.isActive?s.isFound?"üîç –ù–∞—à–ª–∏":"üîç –ò—â—É—Ç":"‚úÖ –ù–∞–π–¥–µ–Ω–æ")+" ")]),e("div",{staticClass:"card-image",on:{click:function(e){return t.viewDetails(s.id)}}},[s.photoUrl?e("img",{attrs:{src:s.photoUrl,alt:s.title}}):e("div",{staticClass:"no-image"},[t._v(" üì∑ –ù–µ—Ç —Ñ–æ—Ç–æ ")])]),e("div",{staticClass:"card-content"},[e("h3",{staticClass:"card-title",on:{click:function(e){return t.viewDetails(s.id)}}},[t._v(" "+t._s(s.title)+" ")]),e("div",{staticClass:"card-meta"},[e("span",{staticClass:"meta-item"},[t._v("üèôÔ∏è "+t._s(s.city))]),s.address?e("span",{staticClass:"meta-item"},[t._v("üìç "+t._s(s.address))]):t._e(),e("span",{staticClass:"meta-item"},[t._v("üìÖ "+t._s(t.formatDate(s.lostDate)))]),s.color?e("span",{staticClass:"meta-item"},[t._v("üé® "+t._s(s.color))]):t._e()]),e("div",{staticClass:"card-description"},[t._v(" "+t._s(t.truncateText(s.description,100))+" ")]),e("div",{staticClass:"card-footer"},[e("div",{staticClass:"user-info"},[e("span",{staticClass:"user-name"},[t._v("üë§ "+t._s(s.userName))]),e("span",{staticClass:"created-at"},[t._v("–°–æ–∑–¥–∞–Ω–æ: "+t._s(t.formatDateTime(s.createdAt)))]),s.updatedAt!==s.createdAt?e("span",{staticClass:"updated-at"},[t._v(" –û–±–Ω–æ–≤–ª–µ–Ω–æ: "+t._s(t.formatDateTime(s.updatedAt))+" ")]):t._e()]),e("div",{staticClass:"card-actions"},[s.reward>0?e("button",{staticClass:"btn-reward"},[t._v(" üí∞ "+t._s(t.formatCurrency(s.reward))+" ")]):t._e(),s.userId===t.currentUserId?e("button",{staticClass:"btn-edit",on:{click:function(e){return t.editAnnouncement(s.id)}}},[t._v(" ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ")]):t._e(),e("button",{staticClass:"btn-view",on:{click:function(e){return t.viewDetails(s.id)}}},[t._v(" üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ ")])])])])])}),0)]),t.showPagination&&t.filteredAnnouncements.length>0?e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v("‚Üê –ù–∞–∑–∞–¥")]),e("span",[t._v("–°—Ç—Ä–∞–Ω–∏—Ü–∞ "+t._s(t.currentPage)+" –∏–∑ "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v("–í–ø–µ—Ä–µ–¥ ‚Üí")])]):t._e()])},Ut=[];const Tt={name:"AnnouncementsList",props:{announcements:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},showFilters:{type:Boolean,default:!0},showStats:{type:Boolean,default:!0},showCreateButton:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},itemsPerPage:{type:Number,default:12}},data(){return{filters:{city:"",category:"",status:"all",dateRange:"all"},currentPage:1,currentUserId:localStorage.getItem("currentUserId")}},computed:{availableCities(){const t=new Set;return this.announcements.forEach(e=>{e.city&&t.add(e.city)}),Array.from(t).sort()},availableCategories(){const t=new Set;return this.announcements.forEach(e=>{e.category&&t.add(e.category)}),Array.from(t).sort()},hasActiveFilters(){return Object.values(this.filters).some(t=>"all"!==t&&""!==t)},filteredAnnouncements(){let t=[...this.announcements];if(this.filters.city&&(t=t.filter(t=>t.city===this.filters.city)),this.filters.category&&(t=t.filter(t=>t.category===this.filters.category)),"active"===this.filters.status?t=t.filter(t=>!0===t.isActive):"inactive"===this.filters.status&&(t=t.filter(t=>!1===t.isActive)),"all"!==this.filters.dateRange){const e=new Date;let s;switch(this.filters.dateRange){case"today":s=new Date(e.getFullYear(),e.getMonth(),e.getDate());break;case"week":s=new Date(e.getTime()-6048e5);break;case"month":s=new Date(e.getFullYear(),e.getMonth()-1,e.getDate());break}t=t.filter(t=>{const e=new Date(t.lostDate);return e>=s})}return t},paginatedAnnouncements(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredAnnouncements.slice(t,e)},totalPages(){return Math.ceil(this.filteredAnnouncements.length/this.itemsPerPage)},activeCount(){return this.announcements.filter(t=>!0===t.isActive).length},inactiveCount(){return this.announcements.filter(t=>!1===t.isActive).length}},watch:{filters:{handler(){this.currentPage=1,this.$emit("filters-changed",this.filters)},deep:!0}},methods:{applyFilters(){this.$emit("filters-applied",this.filters)},clearFilters(){this.filters={city:"",category:"",status:"all",dateRange:"all"},this.$emit("filters-cleared")},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},viewDetails(t){this.$router.push({path:"/details",query:{id:t}})},editAnnouncement(t){this.$router.push(`/edit/${t}`)},goToCreate(){this.$router.push("/create")},formatDate(t){if(!t)return"";const e=new Date(t);return e.toLocaleDateString("ru-RU")},formatDateTime(t){if(!t)return"";const e=new Date(t);return e.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},formatCurrency(t){return t?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(t):"0 ‚ÇΩ"},truncateText(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}}},Et=Tt;var It=(0,u.A)(Et,Pt,Ut,!1,null,"091e7d14",null);const Rt=It.exports,Ft={name:"AllAnnouncements",components:{AnnouncementsList:Rt},data(){return{loading:!1,allAnnouncements:[],filters:{}}},mounted(){this.loadAllAnnouncements()},methods:{async loadAllAnnouncements(){this.loading=!0;try{const t=await fetch("/announcements/all");t.ok?this.allAnnouncements=await t.json():await this.loadMockData(),console.log("üìã –ó–∞–≥—Ä—É–∂–µ–Ω–æ –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π:",this.allAnnouncements.length)}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:",t),await this.loadMockData()}finally{this.loading=!1}},async loadMockData(){this.allAnnouncements=[{id:"1",title:"–ö–ª—é—á–∏ –æ—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã",category:"KEYS",description:"–°–≤—è–∑–∫–∞ –∫–ª—é—á–µ–π —Å –±—Ä–µ–ª–æ–∫–æ–º –≤ –≤–∏–¥–µ –º–µ–¥–≤–µ–¥—è. –ü–æ—Ç–µ—Ä—è–ª —É –º–µ—Ç—Ä–æ.",city:"–ú–æ—Å–∫–≤–∞",address:"–º. –ü—Ä–æ—Å–ø–µ–∫—Ç –ú–∏—Ä–∞",lostDate:"2024-01-15",color:"–°–µ—Ä–µ–±—Ä–∏—Å—Ç—ã–π",reward:1e3,photoUrl:null,userId:"user1",userName:"–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",createdAt:"2024-01-15T10:30:00",updatedAt:"2024-01-15T10:30:00",isActive:!0},{id:"2",title:"iPhone 13 —á–µ—Ä–Ω—ã–π",category:"ELECTRONICS",description:"–¢–µ–ª–µ—Ñ–æ–Ω –≤ —á–µ—Ä–Ω–æ–º —á–µ—Ö–ª–µ. –ü–æ—Ç–µ—Ä—è–ª –≤ –ø–∞—Ä–∫–µ –ì–æ—Ä—å–∫–æ–≥–æ.",city:"–ú–æ—Å–∫–≤–∞",address:"–ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ",lostDate:"2024-01-14",color:"–ß–µ—Ä–Ω—ã–π",reward:5e3,photoUrl:null,userId:"user2",userName:"–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞",createdAt:"2024-01-14T15:45:00",updatedAt:"2024-01-14T15:45:00",isActive:!0},{id:"3",title:"–ö—Ä–∞—Å–Ω—ã–π –∫–æ—à–µ–ª–µ–∫",category:"WALLET",description:"–ö–æ–∂–∞–Ω—ã–π –∫–æ—à–µ–ª–µ–∫ –∫—Ä–∞—Å–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –≤–Ω—É—Ç—Ä–∏.",city:"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",address:"–ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç",lostDate:"2024-01-13",color:"–ö—Ä–∞—Å–Ω—ã–π",reward:2e3,photoUrl:null,userId:"user3",userName:"–ê–ª–µ–∫—Å–µ–π –°–º–∏—Ä–Ω–æ–≤",createdAt:"2024-01-13T12:20:00",updatedAt:"2024-01-13T12:20:00",isActive:!1}]},handleFiltersChanged(t){this.filters=t,console.log("–§–∏–ª—å—Ç—Ä—ã –∏–∑–º–µ–Ω–µ–Ω—ã:",t)}}},St=Ft;var xt=(0,u.A)(St,$t,kt,!1,null,"93f1a454",null);const Mt=xt.exports;var Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"details-page"},[e("div",{staticClass:"details-header"},[e("button",{staticClass:"btn-back",on:{click:t.goBack}},[t._v(" ‚Üê –ù–∞–∑–∞–¥ ")]),e("h2",[t._v("–î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")])]),e("div",{staticClass:"details-content"},[t.loading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"loading"},[t._v("–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...")])]):t.error?e("div",{staticClass:"error-container"},[e("div",{staticClass:"error-message"},[t._v(" ‚ùå "+t._s(t.error)+" ")]),e("button",{staticClass:"btn-back-to-list",on:{click:t.goToAnnouncements}},[t._v(" –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π ")])]):t.announcement?e("div",{staticClass:"announcement-details"},[e("div",{staticClass:"details-header-info"},[e("div",{staticClass:"title-section"},[e("h1",{staticClass:"announcement-title"},[t._v(t._s(t.announcement.title))]),e("div",{staticClass:"status-badge",class:t.announcement.isActive?t.announcement.isFound?"found":"active":"inactive"},[t._v(" "+t._s(t.announcement.isActive?t.announcement.isFound?"üîç –ù–∞—à–ª–∏":"üîç –ò—â—É—Ç":"‚úÖ –ù–∞–π–¥–µ–Ω–æ")+" ")])]),e("div",{staticClass:"meta-info"},[e("span",{staticClass:"created-date"},[t._v(" –°–æ–∑–¥–∞–Ω–æ: "+t._s(t.formatDateTime(t.announcement.createdAt))+" ")]),t.announcement.updatedAt!==t.announcement.createdAt?e("span",{staticClass:"updated-date"},[t._v(" –û–±–Ω–æ–≤–ª–µ–Ω–æ: "+t._s(t.formatDateTime(t.announcement.updatedAt))+" ")]):t._e()])]),e("div",{staticClass:"details-grid"},[e("div",{staticClass:"left-column"},[e("div",{staticClass:"photo-section"},[t.announcement.photoUrl?e("div",{staticClass:"photo-container"},[e("img",{staticClass:"main-photo",attrs:{src:t.announcement.photoUrl,alt:t.announcement.title},on:{click:t.openPhotoModal}})]):e("div",{staticClass:"no-photo"},[e("div",{staticClass:"no-photo-icon"},[t._v("üì∑")]),e("p",[t._v("–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")])])]),e("div",{staticClass:"description-section"},[e("h3",[t._v("–û–ø–∏—Å–∞–Ω–∏–µ")]),e("div",{staticClass:"description-content"},[t.announcement.description?e("p",[t._v(t._s(t.announcement.description))]):e("p",{staticClass:"no-description"},[t._v("–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")])])])]),e("div",{staticClass:"right-column"},[e("div",{staticClass:"details-section"},[e("h3",[t._v("–î–µ—Ç–∞–ª–∏ –ø–æ—Ç–µ—Ä–∏")]),e("div",{staticClass:"details-list"},[e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üó∫Ô∏è –ì–æ—Ä–æ–¥:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.announcement.city))])]),t.announcement.address?e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üìç –ê–¥—Ä–µ—Å:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.announcement.address))])]):t._e(),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üìÖ –î–∞—Ç–∞ –ø–æ—Ç–µ—Ä–∏:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.formatDate(t.announcement.lostDate)))])]),t.announcement.color?e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üé® –¶–≤–µ—Ç:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.announcement.color))])]):t._e(),e("div",{staticClass:"detail-item"},[e("span",{staticClass:"detail-label"},[t._v("üìã –ö–∞—Ç–µ–≥–æ—Ä–∏—è:")]),e("span",{staticClass:"detail-value"},[t._v(t._s(t.getCategoryName(t.announcement.category)))])])])]),t.announcement.reward>0?e("div",{staticClass:"reward-section"},[e("h3",[t._v("–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ")]),e("div",{staticClass:"reward-amount"},[e("span",{staticClass:"reward-icon"},[t._v("üí∞")]),e("span",{staticClass:"reward-value"},[t._v(t._s(t.formatCurrency(t.announcement.reward)))])])]):t._e(),e("div",{staticClass:"author-section"},[e("h3",[t._v("–ê–≤—Ç–æ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è")]),e("div",{staticClass:"author-info"},[e("div",{staticClass:"author-name"},[t._v("üë§ "+t._s(t.announcement.userName))]),t.isCurrentUserAuthor?e("div",{staticClass:"author-note"},[e("span",{staticClass:"your-announcement"},[t._v("(–≠—Ç–æ –≤–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ)")])]):t._e()])]),e("div",{staticClass:"action-buttons"},[t.isCurrentUserAuthor?e("button",{staticClass:"btn-edit",on:{click:t.editAnnouncement}},[t._v(" ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ")]):t._e(),!t.isCurrentUserAuthor&&t.hasCurrentUserResponded&&t.announcement.isActive&&t.announcement.isFound?e("div",{staticClass:"already-responded"},[t._m(0),t._m(1)]):t._e(),!t.isCurrentUserAuthor&&t.hasCurrentUserResponded&&t.announcement.isActive&&!t.announcement.isFound?e("div",{staticClass:"already-responded"},[t._m(2),t._m(3)]):t._e(),t.isCurrentUserAuthor||!t.announcement.isActive||t.hasCurrentUserResponded?t._e():e("button",{staticClass:"btn-contact",attrs:{disabled:t.isResponding},on:{click:t.contactAuthor}},[t._v(" üìû –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è ")]),e("button",{staticClass:"btn-share",on:{click:t.shareAnnouncement}},[t._v(" üîó –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ")]),t.isCurrentUserAuthor&&t.announcement.isActive?e("button",{staticClass:"btn-close",attrs:{disabled:t.announcement.isActive},on:{click:t.close}},[t._v(" –ó–∞–∫—Ä—ã—Ç—å ")]):t._e()])])]),t.isCurrentUserAuthor&&t.announcement.respondedUsers&&t.announcement.respondedUsers.length>0?e("div",{staticClass:"responses-section author-responses"},[e("div",{staticClass:"responses-header"},[e("h3",[t._v("–õ—é–¥–∏, –æ—Ç–∫–ª–∏–∫–Ω—É–≤—à–∏–µ—Å—è –Ω–∞ –≤–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ")]),e("div",{staticClass:"responses-count"},[t._v(" üí¨ "+t._s(t.announcement.respondedUsers.length)+" "+t._s(t.getResponsesText(t.announcement.respondedUsers.length))+" –æ—Ç–∫–ª–∏–∫–Ω—É–ª–æ—Å—å ")])]),e("div",{staticClass:"responders-list"},t._l(t.announcement.respondedUsers,function(s){return e("div",{key:s.id,staticClass:"responder-card"},[e("div",{staticClass:"responder-avatar"},[t._v(" "+t._s(t.getUserInitials(s.name))+" ")]),e("div",{staticClass:"responder-info"},[e("div",{staticClass:"responder-name"},[t._v(" "+t._s(s.name)+" "),s.city?e("span",{staticClass:"responder-city"},[t._v("üìç "+t._s(s.city))]):t._e()]),e("div",{staticClass:"responder-contacts"},[s.phone?e("div",{staticClass:"contact-item"},[e("span",{staticClass:"contact-icon"},[t._v("üì±")]),e("a",{staticClass:"contact-link",attrs:{href:"tel:"+s.phone}},[t._v(t._s(s.phone))])]):t._e(),s.email?e("div",{staticClass:"contact-item"},[e("span",{staticClass:"contact-icon"},[t._v("üìß")]),e("a",{staticClass:"contact-link",attrs:{href:"mailto:"+s.email}},[t._v(t._s(s.email))])]):t._e()]),s.dateCreating?e("div",{staticClass:"responder-date"},[t._v(" –û—Ç–∫–ª–∏–∫–Ω—É–ª—Å—è: "+t._s(t.formatDateTime(s.dateCreating))+" ")]):t._e()]),e("div",{staticClass:"responder-actions"},[s.phone?e("button",{staticClass:"btn-call",on:{click:function(e){return t.callUser(s.phone)}}},[t._v(" –ü–æ–∑–≤–æ–Ω–∏—Ç—å ")]):t._e(),s.email?e("button",{staticClass:"btn-email",on:{click:function(e){return t.emailUser(s.email)}}},[t._v(" –ù–∞–ø–∏—Å–∞—Ç—å ")]):t._e()])])}),0)]):t._e(),!t.isCurrentUserAuthor&&t.announcement.respondedUsers&&t.announcement.respondedUsers.length>0?e("div",{staticClass:"responses-section public-responses"},[e("h3",[t._v("–û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ")]),e("div",{staticClass:"responses-count"},[t._v(" üí¨ –ù–∞ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —É–∂–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–æ—Å—å "+t._s(t.announcement.respondedUsers.length)+" "+t._s(t.getResponsesText(t.announcement.respondedUsers.length))+" ")]),e("p",{staticClass:"responses-note"},[t._v(" –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–∫–ª–∏–∫–Ω—É–≤—à–∏—Ö—Å—è –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä—É –æ–±—ä—è–≤–ª–µ–Ω–∏—è ")])]):t._e(),t.announcement.isActive?t._e():e("div",{staticClass:"closure-notice"},[e("div",{staticClass:"notice-icon"},[t._v("‚ÑπÔ∏è")]),t._m(4)])]):t._e()]),t.showPhotoModal&&t.announcement.photoUrl?e("div",{staticClass:"photo-modal",on:{click:t.closePhotoModal}},[e("div",{staticClass:"modal-content",on:{click:function(t){t.stopPropagation()}}},[e("button",{staticClass:"modal-close",on:{click:t.closePhotoModal}},[t._v("√ó")]),e("img",{staticClass:"modal-photo",attrs:{src:t.announcement.photoUrl,alt:t.announcement.title}})])]):t._e()])},Nt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"response-status"},[e("span",{staticClass:"response-icon"},[t._v("‚úÖ")]),e("span",{staticClass:"response-text"},[t._v("–í—ã —É–∂–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å –Ω–∞ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"response-info"},[e("p",[t._v("–ê–≤—Ç–æ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏, –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –≤–µ—â—å –∏–º–µ–Ω–Ω–æ –≤–∞–º")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"response-status"},[e("span",{staticClass:"response-icon"},[t._v("‚úÖ")]),e("span",{staticClass:"response-text"},[t._v("–í—ã —É–∂–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å –Ω–∞ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"response-info"},[e("p",[t._v("–ê–≤—Ç–æ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏, –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Å–º–æ–∂–µ—Ç")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"notice-content"},[e("h4",[t._v("–û–±—ä—è–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ")]),e("p",[t._v("–≠—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ. –í–µ—â—å –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ –∞–≤—Ç–æ—Ä–æ–º.")])])}];const Ot={name:"Details",data(){return{announcement:null,loading:!1,error:"",showPhotoModal:!1,currentUserId:localStorage.getItem("currentUserId")||null,isResponding:!1}},computed:{isCurrentUserAuthor(){return this.currentUserId&&this.announcement&&this.announcement.userId===this.currentUserId},hasCurrentUserResponded(){return!!(this.currentUserId&&this.announcement&&this.announcement.respondedUsers)&&this.announcement.respondedUsers.some(t=>t.id===this.currentUserId)}},created(){window.scrollTo(0,0),this.loadAnnouncement()},methods:{async loadAnnouncement(){this.loading=!0,this.error="";try{const t=this.$route.query.id;if(!t)throw new Error("ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω");const e=await fetch(`/announcements/${t}`);if(!e.ok){if(404===e.status)throw new Error("–û–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ");throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")}this.announcement=await e.json(),console.log("–ó–∞–≥—Ä—É–∂–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ:",this.announcement)}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:",t),this.error=t.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—ä—è–≤–ª–µ–Ω–∏–∏"}finally{this.loading=!1}},formatDate(t){if(!t)return"";try{const e=new Date(t);return e.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return t}},formatDateTime(t){if(!t)return"";try{const e=new Date(t);return e.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return t}},formatCurrency(t){return t?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(t):"0 ‚ÇΩ"},getCategoryName(t){const e={ELECTRONICS:"–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",DOCUMENTS:"–î–æ–∫—É–º–µ–Ω—Ç—ã",KEYS:"–ö–ª—é—á–∏",WALLET:"–ö–æ—à–µ–ª–µ–∫/–î–µ–Ω—å–≥–∏",JEWELRY:"–£–∫—Ä–∞—à–µ–Ω–∏—è",CLOTHES:"–û–¥–µ–∂–¥–∞",ANIMALS:"–ñ–∏–≤–æ—Ç–Ω—ã–µ",BAGS:"–°—É–º–∫–∏/–†—é–∫–∑–∞–∫–∏",OTHER:"–î—Ä—É–≥–æ–µ"};return e[t]||t||"–ù–µ —É–∫–∞–∑–∞–Ω–∞"},getResponsesText(t){return 1===t?"—á–µ–ª–æ–≤–µ–∫":t>=2&&t<=4?"—á–µ–ª–æ–≤–µ–∫–∞":"—á–µ–ª–æ–≤–µ–∫"},getUserInitials(t){if(!t)return"?";const e=t.split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():t[0].toUpperCase()},goBack(){this.$router.go(-1)},goToAnnouncements(){this.$router.push("/my_announcements")},editAnnouncement(){this.announcement&&this.announcement.id&&this.$router.push(`/edit/${this.announcement.id}`)},async contactAuthor(){if(this.announcement&&this.announcement.userId)try{const t=await fetch(`/announcements/close?id=${this.currentUserId}`,{method:"POST"});if(!t.ok||!0!==await t.json())throw new Error("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞");await this.loadAnnouncement()}catch(t){alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫")}},async close(){if(this.announcement&&this.announcement.userId){this.isResponding=!0;try{const t=await fetch(`/announcements/respond?id=${this.currentUserId}`,{method:"POST"});if(!t.ok||!0!==await t.json())throw new Error("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞");await this.loadAnnouncement()}catch(t){alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫")}finally{this.isResponding=!1}}},shareAnnouncement(){navigator.share?navigator.share({title:`–ù–∞–π–¥–µ–Ω–æ: ${this.announcement.title}`,text:`–ü–æ–º–æ–≥–∏—Ç–µ –Ω–∞–π—Ç–∏: ${this.announcement.title}. –ì–æ—Ä–æ–¥: ${this.announcement.city}`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!"))},openPhotoModal(){this.announcement.photoUrl&&(this.showPhotoModal=!0)},closePhotoModal(){this.showPhotoModal=!1},callUser(t){t&&window.open(`tel:${t}`,"_self")},emailUser(t){t&&window.open(`mailto:${t}`,"_self")}}},Bt=Ot;var jt=(0,u.A)(Bt,Lt,Nt,!1,null,"06179d43",null);const qt=jt.exports;a.Ay.use(E.Ay);const Ht=new E.Ay({mode:"history",routes:[{path:"/",name:"Home",component:M},{path:"/dashboard",name:"Dashboard",component:q,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:K,meta:{requiresAuth:!0}},{path:"/create",name:"CreateAnnouncement",component:it,meta:{requiresAuth:!0}},{path:"/edit/:id",name:"EditAnnouncement",component:mt,meta:{requiresAuth:!0}},{path:"/my_announcements",name:"MyAnnouncements",component:Dt,meta:{requiresAuth:!0}},{path:"/all_announcements",name:"AllAnnouncements",component:Mt,meta:{requiresAuth:!0}},{path:"/details",name:"Details",component:qt,meta:{requiresAuth:!0}}]});Ht.beforeEach((t,e,s)=>{t.meta.requiresAuth&&!localStorage.getItem("currentUser")?s("/"):s()});const Jt=Ht;a.Ay.config.productionTip=!1,new a.Ay({router:Jt,render:t=>t(T)}).$mount("#app")}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,s),r.exports}s.m=t,(()=>{var t=[];s.O=(e,a,n,r)=>{if(!a){var i=1/0;for(u=0;u<t.length;u++){for(var[a,n,r]=t[u],o=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every(t=>s.O[t](a[l]))?a.splice(l--,1):(o=!1,r<i&&(i=r));if(o){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[a,n,r]}})(),(()=>{s.d=(t,e)=>{for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={524:0};s.O.j=e=>0===t[e];var e=(e,a)=>{var n,r,[i,o,l]=a,c=0;if(i.some(e=>0!==t[e])){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var u=l(s)}for(e&&e(a);c<i.length;c++)r=i[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(u)},a=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var a=s.O(void 0,[504],()=>s(252));a=s.O(a)})();
//# sourceMappingURL=app.5a079796.js.map